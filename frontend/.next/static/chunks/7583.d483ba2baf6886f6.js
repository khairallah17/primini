"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7583],{7583:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var r=t(7437),a=t(2265),i=t(7138),l=t(6648),o=t(6463),n=t(9343),d=t(1014),c=t(546),u=t(9988);let m=c.Ryn({email:c.Z_8().min(1,"L'adresse email est requise").email("Format d'email invalide")});function h(){let e=(0,o.useRouter)(),[s,t]=(0,a.useState)(null),[c,h]=(0,a.useState)(!1),[x,f]=(0,a.useState)(0),{register:p,handleSubmit:v,formState:{errors:b,isSubmitting:w}}=(0,n.cI)({resolver:(0,d.F)(m)}),j=async s=>{t(null),h(!1);try{await u.Z.post("/auth/password/reset/request/",{email:s.email}),h(!0),f(60);let t=setInterval(()=>{f(e=>e<=1?(clearInterval(t),0):e-1)},1e3);setTimeout(()=>{e.push("/forgot-password/verify?email=".concat(encodeURIComponent(s.email)))},2e3)}catch(e){var r;if(console.warn("Failed to request password reset",e),null===(r=e.response)||void 0===r?void 0:r.data){let s=e.response.data;"string"==typeof s?t(s):s.error?t(s.error):s.email?t(Array.isArray(s.email)?s.email[0]:s.email):t("Une erreur est survenue. Veuillez r\xe9essayer.")}else t("Une erreur est survenue. Veuillez r\xe9essayer.")}};return(0,r.jsxs)("div",{className:"grid min-h-svh lg:grid-cols-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 bg-primary p-4 md:p-6",children:[(0,r.jsx)("div",{className:"flex justify-center gap-2 md:justify-start",children:(0,r.jsx)(i.default,{href:"/",className:"flex items-center gap-2 font-medium",children:(0,r.jsx)(l.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:120,height:40,className:"h-8 w-auto object-contain",priority:!0})})}),(0,r.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Mot de passe oubli\xe9"}),(0,r.jsx)("p",{className:"text-sm text-white/80",children:"Entrez votre adresse email et nous vous enverrons un code de v\xe9rification."})]}),c?(0,r.jsx)("div",{className:"rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm p-6",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-secondary/20",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("p",{className:"text-sm text-white/90",children:"Un code de v\xe9rification a \xe9t\xe9 envoy\xe9 \xe0 votre adresse email."}),x>0&&(0,r.jsxs)("p",{className:"text-xs text-white/70",children:["Vous pouvez demander un nouveau code dans ",x," seconde",x>1?"s":"","."]})]})}):(0,r.jsxs)("form",{onSubmit:v(j),className:"space-y-4",children:[s&&(0,r.jsx)("div",{className:"rounded-md bg-red-500/20 border border-red-400/50 p-3 text-sm text-red-100",children:s}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white",htmlFor:"email",children:"Adresse email *"}),(0,r.jsx)("input",{id:"email",type:"email",...p("email"),className:"w-full rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm px-4 py-2.5 text-sm text-white placeholder-white/60 focus:border-white/40 focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30 ".concat(b.email?"border-red-400":""),placeholder:"votre@email.com"}),b.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-300",children:b.email.message})]}),(0,r.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-secondary px-4 py-2.5 text-sm font-semibold text-white hover:bg-secondary/90 disabled:opacity-60 disabled:cursor-not-allowed transition-colors shadow-lg",disabled:w,children:w?"Envoi...":"Envoyer le code"}),(0,r.jsx)("div",{className:"text-center text-sm",children:(0,r.jsx)(i.default,{href:"/login",className:"text-white/80 hover:text-white transition-colors hover:underline",children:"Retour \xe0 la connexion"})})]})]})})]}),(0,r.jsx)("div",{className:"bg-muted relative hidden lg:block",children:(0,r.jsx)(l.default,{src:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",alt:"Cover",fill:!0,className:"object-cover",priority:!0})})]})}},9988:function(e,s,t){var r,a=t(8472),i=t(357);let l=a.Z.create({baseURL:null!==(r=i.env.NEXT_PUBLIC_API_BASE_URL)&&void 0!==r?r:"http://localhost:8000/api",withCredentials:!1});s.Z=l},6463:function(e,s,t){var r=t(1169);t.o(r,"notFound")&&t.d(s,{notFound:function(){return r.notFound}}),t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}}]);