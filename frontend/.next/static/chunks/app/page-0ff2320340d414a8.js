(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{7322:function(e,t,s){Promise.resolve().then(s.bind(s,2927))},2927:function(e,t,s){"use strict";s.d(t,{default:function(){return x}});var a=s(7437),r=s(7138),i=s(2265),l=s(6648),o=s(6463),n=s(6847),c=s(9988),d=s(75),m=s(6359),u=s(1279),g=s(7977);let h={autre:"/images/categories/autre.jpg","image et son":"/images/categories/image-son.jpg","image & son":"/images/categories/image-son.jpg",informatique:"/images/categories/informatique.jpg","petit \xe9lectrom\xe9nager":"/images/categories/electromenager.jpg","petit electromenager":"/images/categories/electromenager.jpg","photo et cam\xe9ra":"/images/categories/photo-camera.jpg","photo & cam\xe9ra":"/images/categories/photo-camera.jpg","photo et camera":"/images/categories/photo-camera.jpg","photo & camera":"/images/categories/photo-camera.jpg","sant\xe9 et beaut\xe9":"/images/categories/sante-beaute.jpg","sant\xe9 - beaut\xe9":"/images/categories/sante-beaute.jpg","sante et beaute":"/images/categories/sante-beaute.jpg","sante - beaute":"/images/categories/sante-beaute.jpg",smartphones:"/images/categories/smartphones.jpg",smartphone:"/images/categories/smartphones.jpg",téléphonie:"/images/categories/telephone.jpg",telephonie:"/images/categories/telephone.jpg",électroménager:"/images/categories/electromenager.jpg",electromenager:"/images/categories/electromenager.jpg"};function p(e){let{isLoading:t,onComplete:s}=e,[r,o]=(0,i.useState)(0),[n,c]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=setTimeout(()=>{c(!0)},5e3),t=setInterval(()=>{o(e=>e>=100?100:e+1)},50);return()=>{clearTimeout(e),clearInterval(t)}},[]),(0,i.useEffect)(()=>{n&&!t&&setTimeout(()=>{s()},300)},[n,t,s]),(0,a.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-primary",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-8",children:[(0,a.jsx)("div",{className:"flex flex-col items-center",children:(0,a.jsx)(l.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:320,height:320,className:"h-32 w-auto object-contain md:h-40",priority:!0,unoptimized:!0})}),(0,a.jsx)("div",{className:"w-64 md:w-80",children:(0,a.jsx)("div",{className:"h-2 overflow-hidden rounded-full bg-white/20",children:(0,a.jsx)("div",{className:"h-full bg-secondary transition-all duration-300 ease-out",style:{width:"".concat(Math.min(r,100),"%")}})})})]})})}function x(){let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)([]),[l,h]=(0,i.useState)([]),[x,b]=(0,i.useState)(!0),[v,w]=(0,i.useState)(!1),[y,N]=(0,i.useState)(""),[S,P]=(0,i.useState)(null),[z,_]=(0,i.useState)(!1),E=(0,o.useRouter)();(0,i.useEffect)(()=>{sessionStorage.getItem("hasVisitedHome")||(_(!0),sessionStorage.setItem("hasVisitedHome","true"))},[]),(0,i.useEffect)(()=>{(async function(){try{let[e,s]=await Promise.all([(0,u.QQ)(),c.Z.get("/products/?page_size=100")]),a=Array.isArray(e)?e:e.results||[];t(a);let i=(s.data.results||[]).map(e=>{var t;return{...e,lowestPrice:null!==(t=e.lowestPrice)&&void 0!==t?t:e.lowest_price}});r(function(e,t){if(e.length<=20)return e;let s=[...e];for(let e=s.length-1;e>0;e-=1){let t=Math.floor(Math.random()*(e+1));[s[e],s[t]]=[s[t],s[e]]}return s.slice(0,20)}(i,20))}catch(e){console.warn("Failed to load home data",e)}finally{b(!1)}})()},[]),(0,i.useEffect)(()=>{(async function(){w(!0);try{let e=((await (0,d.b4)(50,1,100)).results||[]).map(e=>{var t;return{...e,lowestPrice:null!==(t=e.lowestPrice)&&void 0!==t?t:e.lowest_price}});h(e)}catch(e){console.warn("Failed to load products with descriptions",e)}finally{w(!1)}})()},[]),(0,i.useEffect)(()=>{(async function(){try{let e=await (0,m.FD)();P(e)}catch(e){console.warn("Failed to load AdSense config",e)}})()},[]);let k=x||v;return(0,a.jsxs)(a.Fragment,{children:[z&&(0,a.jsx)(p,{isLoading:k,onComplete:()=>{_(!1)}}),(0,a.jsxs)("div",{className:"space-y-16",children:[(0,a.jsxs)("section",{className:"relative grid gap-10 overflow-hidden rounded-3xl bg-gradient-to-br from-primary via-primary/95 to-primary-dark px-10 py-16 text-white shadow-xl md:grid-cols-[1.1fr,1fr]",children:[(0,a.jsx)("div",{className:"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat opacity-40",style:{backgroundImage:"url(https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80)"}}),(0,a.jsx)("div",{className:"absolute inset-0 z-0 bg-gradient-to-br from-primary/60 via-primary/50 to-primary-dark/60"}),(0,a.jsxs)("div",{className:"relative z-10 space-y-6",children:[(0,a.jsx)("p",{className:"text-sm uppercase tracking-wider text-white/60",children:"Comparateur intelligent"}),(0,a.jsx)("h1",{className:"text-4xl font-semibold leading-snug",children:"Trouvez le meilleur prix pour vos produits high-tech pr\xe9f\xe9r\xe9s."}),(0,a.jsx)("p",{className:"text-base text-white/80",children:"Comparez instantan\xe9ment les offres des marchands marocains et soyez alert\xe9 d\xe8s que les prix baissent."}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y.trim()&&E.push("/search?q=".concat(encodeURIComponent(y.trim())))},className:"mt-8 flex flex-col gap-3 sm:flex-row",children:[(0,a.jsx)("input",{type:"search",className:"flex-1 rounded-2xl border-0 bg-white/90 px-6 py-4 text-slate-900 placeholder-slate-500 shadow-lg backdrop-blur focus:bg-white focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Rechercher un produit...",value:y,onChange:e=>N(e.target.value)}),(0,a.jsx)("button",{type:"submit",className:"rounded-2xl bg-white px-8 py-4 text-sm font-semibold text-primary shadow-lg transition-all hover:bg-white/90 hover:shadow-xl",children:"Rechercher"})]})]}),(0,a.jsx)("div",{className:"relative z-10 flex flex-col justify-end gap-4 text-sm text-white/80",children:(0,a.jsxs)("div",{className:"rounded-3xl bg-white/10 p-6 backdrop-blur",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Les chiffres cl\xe9s"}),(0,a.jsxs)("ul",{className:"mt-4 space-y-3",children:[(0,a.jsx)("li",{children:"+3000 produits suivis en temps r\xe9el"}),(0,a.jsx)("li",{children:"+40 marchands r\xe9f\xe9renc\xe9s"}),(0,a.jsx)("li",{children:"Alertes personnalis\xe9es gratuites"})]})]})})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(g.Z,{slot:"homepage_top",className:"my-8"})}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("header",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-semibold text-slate-800",children:"Parcourir par cat\xe9gorie"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"Explorez nos cat\xe9gories pour trouver les meilleurs produits"})]}),(0,a.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[x&&0===e.length&&(0,a.jsx)(j,{}),e.map(e=>(0,a.jsx)(f,{category:e},e.slug))]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(g.Z,{slot:"homepage_middle",className:"my-8"})}),(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h2",{className:"text-2xl font-semibold text-slate-800",children:"Produits populaires"})}),(0,a.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:v?(0,a.jsx)("p",{className:"col-span-full rounded-3xl border border-dashed border-slate-200 bg-white p-10 text-center text-sm text-slate-500",children:"Chargement des produits..."}):l.length>0?l.slice(0,12).map(e=>(0,a.jsx)(n.Z,{product:e},e.id)):s.length>0?s.map(e=>(0,a.jsx)(n.Z,{product:e},e.id)):(0,a.jsx)("p",{className:"col-span-full rounded-3xl border border-dashed border-slate-200 bg-white p-10 text-center text-sm text-slate-500",children:"Les produits populaires seront affich\xe9s d\xe8s qu'ils seront disponibles."})})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(g.Z,{slot:"homepage_bottom",className:"my-8"})})]})]})}function f(e){let{category:t}=e,[s,o]=(0,i.useState)(!1),n=function(e){let t=e.toLowerCase().trim().replace(/\s*&\s*/g," et ").replace(/\s*-\s*/g," et ").replace(/\s+/g," ").trim();if(h[t])return h[t];let s=t.replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ç]/g,"c");return h[s]?h[s]:null}(t.name)||t.icon;return(0,a.jsxs)(r.default,{href:"/categories/".concat(t.slug),className:"group relative flex flex-col items-center justify-center overflow-hidden rounded-3xl border border-slate-200 bg-gradient-to-br from-white to-slate-50 p-8 shadow-sm transition-all hover:-translate-y-2 hover:border-primary/40 hover:shadow-xl",children:[n&&!s?(0,a.jsx)("div",{className:"relative mb-4 h-16 w-16",children:(0,a.jsx)(l.default,{src:n,alt:t.name,width:64,height:64,className:"object-contain",onError:()=>o(!0),unoptimized:!0})}):(0,a.jsx)("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-primary/20 to-secondary/20",children:(0,a.jsx)("span",{className:"text-2xl font-bold text-primary",children:t.name.charAt(0)})}),(0,a.jsx)("h3",{className:"text-center text-base font-semibold text-slate-800 transition-colors group-hover:text-primary",children:t.name})]})}function j(){return(0,a.jsx)(a.Fragment,{children:Array.from({length:8}).map((e,t)=>(0,a.jsxs)("div",{className:"flex h-40 animate-pulse flex-col items-center justify-center rounded-3xl bg-gradient-to-br from-slate-100 to-slate-200 p-8",children:[(0,a.jsx)("div",{className:"mb-4 h-16 w-16 rounded-full bg-slate-300"}),(0,a.jsx)("div",{className:"h-4 w-24 rounded bg-slate-300"})]},t))})}},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"notFound")&&s.d(t,{notFound:function(){return a.notFound}}),s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[8472,231,4974,1877,3642,2971,7023,1744],function(){return e(e.s=7322)}),_N_E=e.O()}]);