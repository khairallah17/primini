(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{3120:function(e,t,a){Promise.resolve().then(a.bind(a,9930)),Promise.resolve().then(a.bind(a,912)),Promise.resolve().then(a.bind(a,1481))},9930:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(7437),n=a(2265),s=a(6463),o=a(1279),i=a(1340);function c(e){let{slug:t}=e,[a,c]=(0,n.useState)(null),[u,l]=(0,n.useState)([]),[d,g]=(0,n.useState)(!0),m=(0,s.useSearchParams)(),p=m.get("subcategory");(0,n.useEffect)(()=>{!async function(){g(!0);try{let[e,a]=await Promise.all([(0,o.n3)(t),(0,o.z6)(t).catch(()=>[])]);c(e),l(a)}catch(e){console.warn("Failed to load category",e);try{let e=await (0,o.n3)(t);c(e)}catch(e){console.warn("Failed to load category as subcategory",e)}}finally{g(!1)}}()},[t]);let f=(0,n.useMemo)(()=>"/categories/".concat(t,"/products/"),[t]),h=(0,n.useMemo)(()=>{let e={};p&&(e.subcategory=p);let t=m.get("brand");t&&(e.brand=t);let a=m.get("price_min");a&&(e.price_min=a);let r=m.get("price_max");return r&&(e.price_max=r),e},[p,m]);return d?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"h-10 w-64 animate-pulse rounded bg-slate-200"}),(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,t)=>(0,r.jsx)("div",{className:"h-60 animate-pulse rounded-3xl bg-gradient-to-br from-slate-100 to-slate-200"},t))})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[u.length>0&&(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[(0,r.jsx)("h2",{className:"mb-3 text-sm font-semibold text-slate-700",children:"Sous-cat\xe9gories"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("a",{href:"/categories/".concat(t),className:"rounded-full px-4 py-2 text-sm font-medium transition-colors ".concat(p?"bg-slate-100 text-slate-700 hover:bg-slate-200":"bg-primary text-white"),children:"Tous"}),u.map(e=>(0,r.jsx)("a",{href:"/categories/".concat(t,"?subcategory=").concat(e.slug),className:"rounded-full px-4 py-2 text-sm font-medium transition-colors ".concat(p===e.slug?"bg-primary text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:e.name},e.id))]})]}),(0,r.jsx)(i.default,{title:a?a.name:"Cat\xe9gorie",endpoint:f,query:h})]})}},1279:function(e,t,a){"use strict";a.d(t,{QQ:function(){return o},R:function(){return n},n3:function(){return i},tG:function(){return c},z6:function(){return s}});var r=a(9988);async function n(e,t){let a={};(null==t?void 0:t.subcategory)&&(a.subcategory=t.subcategory),(null==t?void 0:t.brand)&&(a.brand=t.brand),(null==t?void 0:t.price_min)!==void 0&&(a.price_min=t.price_min.toString()),(null==t?void 0:t.price_max)!==void 0&&(a.price_max=t.price_max.toString()),(null==t?void 0:t.tags)&&t.tags.length>0&&t.tags.forEach(e=>{a.tags=e}),(null==t?void 0:t.ordering)&&(a.ordering=t.ordering),(null==t?void 0:t.page)&&(a.page=t.page.toString()),(null==t?void 0:t.page_size)&&(a.page_size=t.page_size.toString());let n=(await r.Z.get("/categories/".concat(e,"/products/"),{params:a})).data;return{...n,results:n.results.map(e=>{var t;return{...e,lowestPrice:null!==(t=e.lowestPrice)&&void 0!==t?t:e.lowest_price}})}}async function s(e){let t=await r.Z.get("/categories/".concat(e,"/subcategories/"));return Array.isArray(t.data)?t.data:t.data.results||[]}async function o(e,t){let a={};return e&&(a.page=e.toString()),t&&(a.page_size=t.toString()),(await r.Z.get("/categories/parents/",{params:a})).data}async function i(e){return(await r.Z.get("/categories/".concat(e,"/"))).data}async function c(e){let t={};e&&(t.search=e);let a=await r.Z.get("/categories/",{params:{...t,page_size:"1000"}});return Array.isArray(a.data)?a.data:"results"in a.data&&a.data.results||[]}},6463:function(e,t,a){"use strict";var r=a(1169);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}}),a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[8472,231,4974,9452,1340,2971,7023,1744],function(){return e(e.s=3120)}),_N_E=e.O()}]);