"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9850],{9850:function(e,s,r){r.r(s),r.d(s,{default:function(){return p}});var t=r(7437),a=r(2265),o=r(7138),i=r(6648),n=r(6463),l=r(9343),d=r(1014),c=r(546),m=r(9988);let u=c.Ryn({new_password:c.Z_8().min(1,"Le mot de passe est requis").min(8,"Le mot de passe doit contenir au moins 8 caract\xe8res").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Le mot de passe doit contenir au moins une majuscule, une minuscule et un chiffre"),confirm_password:c.Z_8().min(1,"La confirmation du mot de passe est requise")}).refine(e=>e.new_password===e.confirm_password,{message:"Les mots de passe ne correspondent pas",path:["confirm_password"]});function p(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),r=(null==s?void 0:s.get("token"))||"",[c,p]=(0,a.useState)(null),[h,f]=(0,a.useState)(!1),{register:x,handleSubmit:w,formState:{errors:j,isSubmitting:b}}=(0,l.cI)({resolver:(0,d.F)(u)});(0,a.useEffect)(()=>{h&&setTimeout(()=>{e.push("/login")},3e3)},[h,e]);let g=async e=>{if(p(null),!r){p("Token manquant. Veuillez recommencer le processus.");return}try{await m.Z.post("/auth/password/reset/",{reset_token:r,new_password:e.new_password,confirm_password:e.confirm_password}),f(!0)}catch(e){var s;if(console.warn("Failed to reset password",e),null===(s=e.response)||void 0===s?void 0:s.data){let s=e.response.data;"string"==typeof s?p(s):s.error?p(s.error):s.reset_token?p(Array.isArray(s.reset_token)?s.reset_token[0]:s.reset_token):s.new_password?p(Array.isArray(s.new_password)?s.new_password[0]:s.new_password):s.confirm_password?p(Array.isArray(s.confirm_password)?s.confirm_password[0]:s.confirm_password):p("Une erreur est survenue. Veuillez r\xe9essayer.")}else p("Une erreur est survenue. Veuillez r\xe9essayer.")}};return r?h?(0,t.jsxs)("div",{className:"grid min-h-svh lg:grid-cols-2",children:[(0,t.jsx)("div",{className:"flex flex-col gap-4 bg-primary p-4 md:p-6",children:(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,t.jsx)("div",{className:"w-full max-w-md space-y-4",children:(0,t.jsx)("div",{className:"rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm p-6",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-secondary/20",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Mot de passe r\xe9initialis\xe9"}),(0,t.jsx)("p",{className:"text-sm text-white/90",children:"Votre mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s. Vous allez \xeatre redirig\xe9 vers la page de connexion."})]})})})})}),(0,t.jsx)("div",{className:"bg-muted relative hidden lg:block",children:(0,t.jsx)(i.default,{src:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",alt:"Cover",fill:!0,className:"object-cover",priority:!0})})]}):(0,t.jsxs)("div",{className:"grid min-h-svh lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 bg-primary p-4 md:p-6",children:[(0,t.jsx)("div",{className:"flex justify-center gap-2 md:justify-start",children:(0,t.jsx)(o.default,{href:"/",className:"flex items-center gap-2 font-medium",children:(0,t.jsx)(i.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:120,height:40,className:"h-8 w-auto object-contain",priority:!0})})}),(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,t.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Nouveau mot de passe"}),(0,t.jsx)("p",{className:"text-sm text-white/80",children:"Entrez votre nouveau mot de passe."})]}),(0,t.jsxs)("form",{onSubmit:w(g),className:"space-y-4",children:[c&&(0,t.jsx)("div",{className:"rounded-md bg-red-500/20 border border-red-400/50 p-3 text-sm text-red-100",children:c}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-white",htmlFor:"new_password",children:"Nouveau mot de passe *"}),(0,t.jsx)("input",{id:"new_password",type:"password",...x("new_password"),className:"w-full rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm px-4 py-2.5 text-sm text-white placeholder-white/60 focus:border-white/40 focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30 ".concat(j.new_password?"border-red-400":""),placeholder:"••••••••"}),j.new_password&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-300",children:j.new_password.message}),(0,t.jsx)("p",{className:"text-xs text-white/70 mt-1",children:"Au moins 8 caract\xe8res avec majuscule, minuscule et chiffre"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-white",htmlFor:"confirm_password",children:"Confirmer le mot de passe *"}),(0,t.jsx)("input",{id:"confirm_password",type:"password",...x("confirm_password"),className:"w-full rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm px-4 py-2.5 text-sm text-white placeholder-white/60 focus:border-white/40 focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30 ".concat(j.confirm_password?"border-red-400":""),placeholder:"••••••••"}),j.confirm_password&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-300",children:j.confirm_password.message})]}),(0,t.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-secondary px-4 py-2.5 text-sm font-semibold text-white hover:bg-secondary/90 disabled:opacity-60 disabled:cursor-not-allowed transition-colors shadow-lg",disabled:b,children:b?"R\xe9initialisation...":"R\xe9initialiser le mot de passe"})]})]})})]}),(0,t.jsx)("div",{className:"bg-muted relative hidden lg:block",children:(0,t.jsx)(i.default,{src:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",alt:"Cover",fill:!0,className:"object-cover",priority:!0})})]}):(0,t.jsx)("div",{className:"grid min-h-svh lg:grid-cols-2",children:(0,t.jsx)("div",{className:"flex flex-col gap-4 bg-primary p-4 md:p-6",children:(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,t.jsxs)("div",{className:"w-full max-w-md space-y-4 text-center",children:[(0,t.jsx)("p",{className:"text-white",children:"Token manquant. Veuillez recommencer le processus."}),(0,t.jsx)(o.default,{href:"/forgot-password",className:"text-secondary hover:underline",children:"Retour"})]})})})})}},9988:function(e,s,r){let t=r(8472).Z.create({baseURL:"http://api.azyo6271.odns.fr/api",withCredentials:!1});s.Z=t},6463:function(e,s,r){var t=r(1169);r.o(t,"notFound")&&r.d(s,{notFound:function(){return t.notFound}}),r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})}}]);