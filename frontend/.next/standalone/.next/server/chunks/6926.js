"use strict";exports.id=6926,exports.ids=[6926],exports.modules={3333:(e,s,t)=>{t.d(s,{Z:()=>d});var l=t(326),a=t(6226),r=t(434),i=t(7577),n=t(2679);function d({product:e}){let{addFavorite:s,removeFavorite:t,isFavorite:d}=(0,n.r)(),o=d(e.id),[c,m]=(0,i.useState)(!1),[x,p]=(0,i.useState)(null),u=e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.startsWith("/media/")||e.startsWith("media/")){let s="http://api.azyo6271.odns.fr/api".replace("/api",""),t=e.startsWith("/")?e:`/${e}`;return`${s}${t}`}if(!e.startsWith("/")){let s="http://api.azyo6271.odns.fr/api".replace("/api","");return`${s}/media/products/${e}`}return e},h=(0,i.useMemo)(()=>e.image_display?e.image_display:e.image_file?u(e.image_file):e.image?u(e.image):null,[e.image_display,e.image_file,e.image]),b=e.tags?.slice(0,3)||[],f=e.lowestPrice??e.lowest_price,g=null!=f?"string"==typeof f?parseFloat(f):f:null,j=x||h;return l.jsx(r.default,{href:`/product/${e.slug}`,className:"block h-full",children:(0,l.jsxs)("article",{className:"flex h-full flex-col justify-between rounded-3xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-1 hover:shadow-lg cursor-pointer",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[j&&!c?(0,l.jsxs)("div",{className:"relative aspect-[4/3] overflow-hidden rounded-2xl bg-white",children:[b.length>0&&l.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-wrap gap-1.5",children:b.map((e,s)=>l.jsx("span",{className:"px-2 py-0.5 text-[10px] sm:text-xs font-medium bg-white/90 backdrop-blur-sm text-slate-700 rounded-full border border-slate-200 shadow-sm",children:e},s))}),l.jsx("div",{className:"absolute inset-2 sm:inset-3",children:l.jsx(a.default,{src:j,alt:e.name,fill:!0,className:"object-contain transition-transform duration-300 hover:scale-105",sizes:"(max-width: 640px) 100vw, (max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw",quality:90,priority:!1,loading:"lazy",placeholder:"blur",blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==",onError:()=>{let s=x===e.image_display||!x&&h===e.image_display,t=x===u(e.image_file)||!x&&h===u(e.image_file);if(s&&e.image_file){let s=u(e.image_file);if(s&&s!==x){p(s),m(!1);return}}if((s||t)&&e.image){let s=u(e.image);if(s&&s!==x&&s!==h){p(s),m(!1);return}}m(!0)}})})]}):(0,l.jsxs)("div",{className:"relative aspect-[4/3] flex items-center justify-center rounded-2xl bg-gradient-to-br from-slate-100 to-slate-200",children:[b.length>0&&l.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-wrap gap-1.5",children:b.map((e,s)=>l.jsx("span",{className:"px-2 py-0.5 text-[10px] sm:text-xs font-medium bg-white/90 backdrop-blur-sm text-slate-700 rounded-full border border-slate-200 shadow-sm",children:e},s))}),l.jsx("span",{className:"text-xs font-medium text-slate-400",children:"Aucune image"})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:e.name}),e.description&&l.jsx("p",{className:"mt-2 line-clamp-3 text-xs text-slate-500",children:e.description.replace(/\*\*/g,"").replace(/\*/g,"").replace(/__/g,"").replace(/_/g,"").replace(/\[([^\]]+)\]\([^\)]+\)/g,"$1").replace(/`/g,"").trim()})]})]}),(0,l.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[null===g||isNaN(g)?l.jsx("p",{className:"text-sm text-slate-500",children:"Prix en attente"}):(0,l.jsxs)("p",{className:"text-sm font-semibold text-primary",children:[g.toFixed(3)," MAD"]}),l.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),o?t(e.id):s(e)},className:`rounded-full px-3 py-2 text-xs font-semibold ${o?"bg-secondary text-white":"bg-slate-200 text-slate-700"}`,type:"button",children:o?"Retirer":"Favori"})]})]})})}},6926:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var l=t(326),a=t(7577),r=t(1822),i=t(8029),n=t.n(i),d=t(2791),o=t(4625);let c=[{key:"couleur",label:"Couleur"},{key:"taille_ecran",label:"Taille de l'\xe9cran"},{key:"capacite_stockage",label:"Capacit\xe9 de stockage"},{key:"memoire_vive",label:"M\xe9moire vive (RAM)"},{key:"capacite_batterie",label:"Capacit\xe9 de la batterie"},{key:"resolution_ecran",label:"R\xe9solution d'\xe9cran"},{key:"systeme_exploitation",label:"Syst\xe8me d'exploitation"},{key:"nombre_coeurs",label:"Nombre de coeurs de processeurs"},{key:"frequence_processeur",label:"Fr\xe9quence du processeur"},{key:"resolution_camera_avant",label:"R\xe9solution de la cam\xe9ra avant"},{key:"resolution_camera_arriere",label:"R\xe9solution de la cam\xe9ra arri\xe8re"},{key:"carte_sim",label:"Carte SIM"}];function m({availableBrands:e,availableSpecs:s,filters:t,onChange:a}){let i=e=>{let{name:s,value:l}=e.target,r=l?Number(l):void 0;a({...t,[s]:Number.isFinite(r)?r:void 0})},m=e=>{let s=t.brands.includes(e);a({...t,brands:s?t.brands.filter(s=>s!==e):[...t.brands,e]})},x=(e,s)=>{let l=t.specs[e]||[],r=l.includes(s);a({...t,specs:{...t.specs,[e]:r?l.filter(e=>e!==s):[...l,s]}})},p=void 0!==t.minPrice||void 0!==t.maxPrice||t.brands.length>0||Object.values(t.specs||{}).some(e=>e.length>0);return(0,l.jsxs)("aside",{className:"space-y-4 sm:space-y-6 rounded-xl sm:rounded-3xl border border-slate-200 bg-white p-4 sm:p-6 shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-base sm:text-lg font-semibold text-slate-800",children:"Filtres"}),p&&l.jsx("button",{onClick:()=>{a({minPrice:void 0,maxPrice:void 0,brands:[],specs:{},ordering:t.ordering})},className:"text-xs sm:text-sm font-medium text-primary hover:text-primary/80 transition-colors",type:"button",children:"R\xe9initialiser"})]}),l.jsx(r.p,{defaultOpen:!0,children:({open:e})=>(0,l.jsxs)("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200",children:[(0,l.jsxs)(r.p.Button,{className:"flex w-full items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 text-xs sm:text-sm font-semibold text-slate-700",children:["Prix",e?l.jsx(d.Z,{className:"h-4 w-4"}):l.jsx(o.Z,{className:"h-4 w-4"})]}),l.jsx(r.p.Panel,{className:"px-3 sm:px-4 pb-3 sm:pb-4",children:(0,l.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{htmlFor:"minPrice",className:"text-xs font-medium text-slate-600",children:"Minimum"}),l.jsx("input",{id:"minPrice",name:"minPrice",type:"number",inputMode:"numeric",className:"mt-1 w-full rounded-lg sm:rounded-xl border border-slate-200 px-3 py-2 text-sm",value:t.minPrice??"",onChange:i,placeholder:"0"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{htmlFor:"maxPrice",className:"text-xs font-medium text-slate-600",children:"Maximum"}),l.jsx("input",{id:"maxPrice",name:"maxPrice",type:"number",inputMode:"numeric",className:"mt-1 w-full rounded-lg sm:rounded-xl border border-slate-200 px-3 py-2 text-sm",value:t.maxPrice??"",onChange:i,placeholder:"50000"})]})]})})]})}),l.jsx(r.p,{defaultOpen:!0,children:({open:s})=>(0,l.jsxs)("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200",children:[(0,l.jsxs)(r.p.Button,{className:"flex w-full items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 text-xs sm:text-sm font-semibold text-slate-700 hover:bg-slate-50 transition-colors",children:[l.jsx("span",{children:"Marque"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[t.brands.length>0&&l.jsx("span",{className:"rounded-full bg-primary text-white text-xs px-2 py-0.5",children:t.brands.length}),s?l.jsx(d.Z,{className:"h-4 w-4"}):l.jsx(o.Z,{className:"h-4 w-4"})]})]}),l.jsx(r.p.Panel,{className:"px-3 sm:px-4 pb-3 sm:pb-4",children:e.length>0?l.jsx("div",{className:"space-y-2 pt-2 max-h-64 overflow-y-auto",children:e.map(e=>{let s=t.brands.includes(e);return(0,l.jsxs)("button",{onClick:()=>m(e),className:n()("flex w-full items-center justify-between rounded-lg sm:rounded-xl border px-3 py-2 text-left text-sm transition-all",s?"border-primary bg-primary/10 text-primary font-medium":"border-slate-200 text-slate-600 hover:border-primary/50 hover:bg-primary/5"),type:"button",children:[l.jsx("span",{children:e}),s&&l.jsx("svg",{className:"h-4 w-4 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e)})}):l.jsx("p",{className:"pt-2 text-xs sm:text-sm text-slate-500",children:"Aucune marque disponible"})})]})}),c.map(e=>{let a=s[e.key]||[];return l.jsx(r.p,{children:({open:s})=>(0,l.jsxs)("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200",children:[(0,l.jsxs)(r.p.Button,{className:"flex w-full items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 text-xs sm:text-sm font-semibold text-slate-700 hover:bg-slate-50 transition-colors",children:[l.jsx("span",{children:e.label}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(t.specs[e.key]||[]).length>0&&l.jsx("span",{className:"rounded-full bg-primary text-white text-xs px-2 py-0.5",children:(t.specs[e.key]||[]).length}),s?l.jsx(d.Z,{className:"h-4 w-4"}):l.jsx(o.Z,{className:"h-4 w-4"})]})]}),l.jsx(r.p.Panel,{className:"px-3 sm:px-4 pb-3 sm:pb-4",children:a.length>0?l.jsx("div",{className:"space-y-2 pt-2 max-h-64 overflow-y-auto",children:a.map(s=>{let a=(t.specs[e.key]||[]).includes(s);return(0,l.jsxs)("button",{onClick:()=>x(e.key,s),className:n()("flex w-full items-center justify-between rounded-lg sm:rounded-xl border px-3 py-2 text-left text-sm transition-all",a?"border-primary bg-primary/10 text-primary font-medium":"border-slate-200 text-slate-600 hover:border-primary/50 hover:bg-primary/5"),type:"button",children:[l.jsx("span",{children:s}),a&&l.jsx("svg",{className:"h-4 w-4 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},s)})}):l.jsx("p",{className:"pt-2 text-xs sm:text-sm text-slate-500",children:"Aucune valeur disponible"})})]})},e.key)})]})}var x=t(3333);t(1980);var p=t(2591),u=t(2560);let h={minPrice:void 0,maxPrice:void 0,brands:[],specs:{},ordering:"lowest_price"};function b({title:e,endpoint:s,query:t}){let[r,i]=(0,a.useState)(h),[n,d]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[b,f]=(0,a.useState)({}),[g,j]=(0,a.useState)(1),[y,v]=(0,a.useState)(0),[N,w]=(0,a.useState)(1),[k,_]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),C=(0,a.useMemo)(()=>JSON.stringify(t??{}),[t]),S=(0,a.useMemo)(()=>{let e={page:g,ordering:r.ordering??"lowest_price"};return r.minPrice&&(e.price_min=r.minPrice),r.maxPrice&&(e.price_max=r.maxPrice),r.brands.length>0&&(e.brand=r.brands.join(",")),Object.entries(r.specs||{}).forEach(([s,t])=>{t.length>0&&(e[`spec_${s}`]=t.join(","))}),Object.assign(e,C?JSON.parse(C):{}),e},[r,g,C]),M=void 0!==r.minPrice||void 0!==r.maxPrice||r.brands.length>0||Object.values(r.specs||{}).some(e=>e.length>0);return(0,l.jsxs)("div",{className:"flex flex-col gap-8 lg:flex-row",children:[l.jsx("div",{className:"hidden lg:block lg:w-72",children:l.jsx(m,{availableBrands:o,availableSpecs:b,filters:r,onChange:i})}),A&&(0,l.jsxs)(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>P(!1)}),(0,l.jsxs)("div",{className:"fixed left-0 top-0 h-full w-full max-w-sm bg-white z-50 shadow-2xl transform transition-transform duration-300 ease-in-out lg:hidden overflow-y-auto",children:[(0,l.jsxs)("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-4 flex items-center justify-between z-10",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Filtres"}),l.jsx("button",{onClick:()=>P(!1),className:"flex items-center justify-center w-10 h-10 rounded-lg text-slate-600 hover:bg-slate-100 transition-colors","aria-label":"Fermer les filtres",type:"button",children:l.jsx(p.Z,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-4",children:l.jsx(m,{availableBrands:o,availableSpecs:b,filters:r,onChange:i})})]})]}),(0,l.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("button",{onClick:()=>P(!0),className:"lg:hidden flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors shadow-sm",type:"button",children:[l.jsx(u.Z,{className:"h-5 w-5"}),l.jsx("span",{children:"Filtres"}),M&&l.jsx("span",{className:"rounded-full bg-primary text-white text-xs px-2 py-0.5",children:[void 0!==r.minPrice?1:0,void 0!==r.maxPrice?1:0,r.brands.length,...Object.values(r.specs||{}).map(e=>e.length)].reduce((e,s)=>e+s,0)})]}),(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-900",children:e}),(0,l.jsxs)("p",{className:"text-sm text-slate-500",children:[y," produits trouv\xe9s"]})]})]}),(0,l.jsxs)("select",{value:S.ordering,onChange:e=>i(s=>({...s,ordering:e.target.value})),className:"rounded-full border border-slate-200 px-4 py-2 text-sm bg-white",children:[l.jsx("option",{value:"lowest_price",children:"Prix croissant"}),l.jsx("option",{value:"-lowest_price",children:"Prix d\xe9croissant"}),l.jsx("option",{value:"-id",children:"Nouveaut\xe9s"})]})]}),k?l.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,s)=>l.jsx("div",{className:"h-60 animate-pulse rounded-3xl bg-gradient-to-br from-slate-100 to-slate-200"},s))}):n.length>0?l.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:n.map(e=>l.jsx(x.Z,{product:e},e.id))}):l.jsx("p",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-10 text-center text-sm text-slate-500",children:"Aucun produit ne correspond \xe0 votre recherche. Ajustez les filtres pour d\xe9couvrir d'autres r\xe9sultats."}),(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-3xl border border-slate-200 bg-white px-4 py-3",children:[l.jsx("button",{type:"button",className:"rounded-full px-4 py-2 text-sm font-semibold text-primary disabled:text-slate-400",onClick:()=>j(e=>Math.max(1,e-1)),disabled:1===g,children:"Pr\xe9c\xe9dent"}),(0,l.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",g," sur ",N]}),l.jsx("button",{type:"button",className:"rounded-full px-4 py-2 text-sm font-semibold text-primary disabled:text-slate-400",onClick:()=>j(e=>Math.min(N,e+1)),disabled:g>=N,children:"Suivant"})]})]})]})}}};