exports.id=7325,exports.ids=[7325],exports.modules={1097:(e,t,s)=>{Promise.resolve().then(s.bind(s,8143)),Promise.resolve().then(s.bind(s,3014)),Promise.resolve().then(s.bind(s,5906))},8135:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8143:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(326),a=s(732),l=s(2679);function i({children:e}){return r.jsx(a.H,{children:r.jsx(l.c,{children:e})})}},3014:(e,t,s)=>{"use strict";s.d(t,{default:()=>w});var r=s(326),a=s(5047),l=s(732),i=s(434),n=s(6226),o=s(7577),c=s(2679),d=s(2591),h=s(7477);s(2543);let m={categories:[{name:"Informatique",subcategories:["Composants","Ordinateurs","R\xe9seaux et connectivit\xe9","P\xe9riph\xe9riques","Stockages","Tablettes"]},{name:"T\xe9l\xe9phonie",subcategories:["Smartphones","Accessoires T\xe9l\xe9phones","T\xe9l\xe9phones Fixes","Smart Watches"]},{name:"Sant\xe9 - Beaut\xe9",subcategories:["Visage","Cheveux","Corps","Parfums","Dents","Maquillage","Parfum d'ambiance","Sant\xe9","Hommes"]},{name:"Electrom\xe9nager",subcategories:["Aspirateurs","Machine \xe0 Laver","S\xe8che Linges","Lave vaisselles","Fours","Micro Ondes","Plaques de cuisson","Cuisini\xe8res","Hottes aspirantes","Climatiseurs","Chauffages","Chauffe Bain","R\xe9frig\xe9rateurs et cong\xe9lateurs"]},{name:"Petit Electrom\xe9nager",subcategories:["Machines \xe0 caf\xe9","Fer \xe0 Repasser","Blenders","Appareils de cuisson","Robot P\xe9trin et Robot de Cuisine Multifonction","Machine \xe0 Pain","Mixeurs","Batteurs","Moulins \xe0 caf\xe9","Grille Pains","Gaufriers","Balances de cuisine","Bouilloires","Friteuses","Yaourti\xe8re","D\xe9froisseurs \xe0 vapeur","Sorbeti\xe8res","Centrifugeuses"]},{name:"Image & Son",subcategories:["\xc9couteurs","Haut-parleurs","Syst\xe8mes home cin\xe9ma","Microphones","T\xe9l\xe9viseurs","Projecteurs","Digital TV Boxes","TV Accessories","Casques"]},{name:"Photo & Cam\xe9ra",subcategories:["Appareils photos num\xe9riques","Objectifs pour appareil photo"]}]};function u(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function x({isOpen:e,onOpenChange:t,children:s}){let[a,l]=(0,o.useState)(0),[n,c]=(0,o.useState)(null),[h,x]=(0,o.useState)(!1),p=(0,o.useRef)(null),f=(0,o.useRef)(null),g=(0,o.useRef)(null),b=()=>{g.current&&(clearTimeout(g.current),g.current=null)},v=()=>{b(),g.current=setTimeout(()=>{t(!1),c(null),g.current=null},300)};return e?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{ref:p,onMouseEnter:()=>{b(),t(!0)},onMouseLeave:e=>{let t=e.relatedTarget;if(f.current&&f.current.contains(t)){b();return}v()},className:"relative",children:s}),r.jsx("div",{ref:f,className:"fixed left-0 right-0 z-50 bg-white shadow-2xl",style:{top:`${a}px`},onMouseEnter:()=>{b(),t(!0)},onMouseLeave:()=>{v()},children:r.jsx("div",{className:"bg-white",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-8 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary",children:"Toutes les cat\xe9gories"}),r.jsx("button",{onClick:()=>t(!1),className:"rounded-full p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors","aria-label":"Fermer",children:r.jsx(d.Z,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[r.jsx("div",{className:"w-full lg:w-1/3 border-b lg:border-b-0 lg:border-r border-gray-200 bg-gray-50",children:r.jsx("nav",{className:"py-2 lg:py-4 max-h-[400px] lg:max-h-none overflow-y-auto lg:overflow-visible",children:m.categories.map(e=>r.jsx("div",{onMouseEnter:()=>c(e.name),onClick:()=>{h&&c(n===e.name?null:e.name)},className:`px-4 sm:px-6 py-3 cursor-pointer transition-colors ${n===e.name?"bg-white lg:border-r-2 border-primary text-primary font-semibold":"text-gray-700 hover:bg-white hover:text-primary"}`,children:r.jsx(i.default,{href:`/categories/${u(e.name)}`,onClick:s=>{h&&n===e.name?s.preventDefault():t(!1)},className:"block text-sm sm:text-base",children:e.name})},e.name))})}),r.jsx("div",{className:"w-full lg:w-2/3 bg-white min-h-[300px] lg:min-h-0",children:n?(0,r.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[r.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-primary mb-4 sm:mb-6",children:n}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:m.categories.find(e=>e.name===n)?.subcategories.map((e,s)=>r.jsx(i.default,{href:`/categories/${u(e)}`,onClick:()=>t(!1),className:"block px-3 sm:px-4 py-2 text-xs sm:text-sm lg:text-base text-gray-700 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-200",children:e},`${n}-${e}-${s}`))})]}):r.jsx("div",{className:"flex items-center justify-center h-full p-8",children:r.jsx("p",{className:"text-gray-400 text-sm sm:text-base text-center",children:h?"Cliquez sur une cat\xe9gorie pour voir les sous-cat\xe9gories":"Survolez une cat\xe9gorie pour voir les sous-cat\xe9gories"})})})]})]})})})]}):r.jsx("div",{ref:p,onMouseEnter:()=>t(!0),className:"relative",children:s})}function p(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),{user:s,logout:m,loading:u,isAdmin:p,isClient:f,isUser:g,isVisitor:b}=(0,l.a)(),{favorites:v,removeFavorite:w}=(0,c.r)(),[j,y]=(0,o.useState)(""),[N,k]=(0,o.useState)(!1),[C,M]=(0,o.useState)(!1),[P,S]=(0,o.useState)([]),[L,z]=(0,o.useState)(!1),[$,A]=(0,o.useState)(null),[B,_]=(0,o.useState)({}),F=(0,o.useRef)(null),U=(0,o.useRef)(null),T=e?.startsWith("/admin")||"/register"===e||"/login"===e,W=()=>{m(),t.push("/")},R=e=>{e.preventDefault(),j.trim()&&t.push(`/search?q=${encodeURIComponent(j.trim())}`)};return T?null:(0,r.jsxs)("header",{className:"bg-primary sticky top-0 z-50 shadow-lg",children:[r.jsx("div",{className:"border-b border-primary-dark/30 bg-primary-dark/20",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-6 py-2",children:[r.jsx("nav",{className:"hidden items-center gap-6 text-xs font-medium text-white/80 md:flex",children:[{href:"/deals",label:"Bons plans"},{href:"/magic-tool",label:"L'outil magique"},{href:"/categories",label:"Cat\xe9gories"}].map(e=>r.jsx(i.default,{href:e.href,className:"transition-colors hover:text-white",children:e.label},e.href))}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"hidden items-center gap-3 md:flex",children:[r.jsx("a",{href:"https://www.facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white transition-colors","aria-label":"Facebook",children:r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),r.jsx("a",{href:"https://www.instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white transition-colors","aria-label":"Instagram",children:r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),r.jsx("a",{href:"https://www.linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white transition-colors","aria-label":"LinkedIn",children:r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),r.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white transition-colors","aria-label":"Twitter",children:r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})})]}),r.jsx("div",{className:"flex items-center gap-4 text-xs",children:u?r.jsx("span",{className:"text-white/60",children:"Chargement..."}):s?p||f?(0,r.jsxs)(i.default,{href:p?"/admin":"/dashboard",className:"flex items-center gap-2 text-white/90 hover:text-white transition-colors",children:[r.jsx("span",{className:"hidden sm:inline",children:"Mon Tableau de bord"}),r.jsx("span",{className:"sm:hidden",children:"Compte"})]}):null:r.jsx(i.default,{href:"/login",className:"text-white/90 hover:text-white transition-colors",children:"Connexion"})})]})]})}),r.jsx("div",{className:"border-b border-primary-dark/30",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between gap-4 px-6 py-4",children:[r.jsx(i.default,{href:"/",className:"flex-shrink-0",children:r.jsx(n.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:320,height:320,className:"h-16 sm:h-20 w-auto object-contain",priority:!0})}),r.jsx("form",{onSubmit:R,className:"hidden lg:flex flex-1 max-w-2xl mx-8",children:(0,r.jsxs)("div",{className:"relative w-full",children:[r.jsx("input",{type:"search",value:j,onChange:e=>y(e.target.value),placeholder:"Rechercher un produit...",className:"w-full rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm px-4 py-2.5 pl-10 pr-4 text-sm text-white placeholder-white/60 focus:border-white/40 focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30"}),r.jsx("svg",{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-white/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,r.jsxs)("div",{className:"hidden lg:flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",ref:F,children:[(0,r.jsxs)("button",{onClick:()=>k(!N),className:"flex items-center gap-2 rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm px-3 py-2 text-sm font-medium text-white hover:bg-white/20 transition-colors",type:"button",children:[r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),r.jsx("span",{className:"hidden sm:inline",children:"Ma s\xe9lection"}),v.length>0&&r.jsx("span",{className:"rounded-full bg-secondary px-2 py-0.5 text-xs font-semibold text-white",children:v.length})]}),N&&(0,r.jsxs)("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-xl border border-white/20 bg-white p-5 shadow-2xl",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Produits favoris"}),r.jsx("button",{onClick:()=>k(!1),className:"rounded-full bg-gray-100 p-1 hover:bg-gray-200",type:"button",children:r.jsx(d.Z,{className:"h-5 w-5 text-gray-500"})})]}),0===v.length?r.jsx("p",{className:"text-sm text-gray-500",children:"Ajoutez des produits pour les suivre facilement."}):r.jsx("ul",{className:"space-y-3 max-h-96 overflow-y-auto",children:v.map(e=>(0,r.jsxs)("li",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx(i.default,{href:`/product/${e.slug}`,className:"font-medium text-gray-800 hover:text-primary block truncate",onClick:()=>k(!1),children:e.name}),(e.lowestPrice??e.lowest_price)!==void 0&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["\xe0 partir de ",(e.lowestPrice??e.lowest_price).toFixed(2)," MAD"]})]}),r.jsx("button",{onClick:()=>w(e.id),className:"flex-shrink-0 text-xs text-secondary hover:underline font-medium",type:"button",children:"Retirer"})]},e.id))})]})]}),u?r.jsx("div",{className:"h-10 w-10 animate-pulse rounded-full bg-white/20"}):s?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[p?r.jsx(i.default,{href:"/admin",className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20 text-white text-sm font-semibold transition-colors hover:bg-white/30",title:"Aller au tableau de bord admin",children:(s.first_name?.[0]||s.username?.[0]||s.email[0]||"U").toUpperCase()}):f?r.jsx(i.default,{href:"/dashboard",className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20 text-white text-sm font-semibold transition-colors hover:bg-white/30",children:(s.first_name?.[0]||s.username?.[0]||s.email[0]||"U").toUpperCase()}):r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20 text-white text-sm font-semibold",title:"Compte utilisateur",children:(s.first_name?.[0]||s.username?.[0]||s.email[0]||"U").toUpperCase()}),(0,r.jsxs)("div",{className:"hidden lg:block",children:[r.jsx("p",{className:"text-sm font-medium text-white",children:s.first_name&&s.last_name?`${s.first_name} ${s.last_name}`:s.username||"Mon compte"}),r.jsx("button",{onClick:W,className:"text-xs text-white/70 hover:text-white transition-colors",children:"D\xe9connexion"})]})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.default,{href:"/login",className:"hidden rounded-lg border border-white/20 bg-white/10 backdrop-blur-sm px-4 py-2 text-sm font-medium text-white hover:bg-white/20 transition-colors sm:inline-block",children:"Connexion"}),r.jsx(i.default,{href:"/register",className:"rounded-lg bg-secondary px-4 py-2 text-sm font-medium text-white hover:bg-secondary/90 transition-colors shadow-lg",children:"Inscription"})]})]}),r.jsx("button",{"data-mobile-menu-button":!0,onClick:()=>z(!0),className:"lg:hidden flex items-center justify-center w-10 h-10 rounded-lg text-white hover:bg-white/20 transition-colors","aria-label":"Ouvrir le menu",type:"button",children:r.jsx(h.Z,{className:"h-6 w-6"})})]})}),r.jsx("div",{className:"border-b border-primary-dark/30 bg-primary-dark/10 relative",children:r.jsx("div",{className:"mx-auto max-w-7xl px-6",children:(0,r.jsxs)("nav",{className:"flex items-center gap-6 overflow-x-auto py-3 scrollbar-hide",children:[r.jsx(i.default,{href:"/deals",className:`whitespace-nowrap text-sm font-medium transition-colors ${e.startsWith("/deals")?"text-white border-b-2 border-secondary pb-1":"text-white/80 hover:text-white"}`,children:"Bons plans"}),r.jsx(x,{isOpen:C,onOpenChange:M,children:(0,r.jsxs)("button",{className:`whitespace-nowrap text-sm font-medium transition-colors flex items-center gap-1 ${C||e.startsWith("/categories")?"text-white border-b-2 border-secondary pb-1":"text-white/80 hover:text-white"}`,type:"button",children:["Cat\xe9gories",r.jsx("svg",{className:`h-4 w-4 transition-transform ${C?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})})}),L&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 lg:hidden",onClick:()=>z(!1)}),(0,r.jsxs)("div",{ref:U,className:"fixed left-0 top-0 h-full w-full max-w-sm bg-white z-50 shadow-2xl transform transition-transform duration-300 ease-in-out lg:hidden overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-primary p-4 flex items-center justify-between border-b border-primary-dark/30 z-10",children:[r.jsx(i.default,{href:"/",onClick:()=>z(!1),className:"flex-shrink-0",children:r.jsx(n.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:320,height:320,className:"h-12 w-auto object-contain",priority:!0})}),r.jsx("button",{onClick:()=>z(!1),className:"flex items-center justify-center w-10 h-10 rounded-lg text-white hover:bg-white/20 transition-colors","aria-label":"Fermer le menu",type:"button",children:r.jsx(d.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[r.jsx("form",{onSubmit:e=>{R(e),z(!1)},children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"search",value:j,onChange:e=>y(e.target.value),placeholder:"Rechercher un produit...",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 pl-10 pr-4 text-sm text-gray-900 placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"}),r.jsx("svg",{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i.default,{href:"/deals",onClick:()=>z(!1),className:`block px-4 py-3 rounded-lg text-base font-medium transition-colors ${e.startsWith("/deals")?"bg-primary/10 text-primary":"text-gray-700 hover:bg-gray-100"}`,children:"Bons plans"}),r.jsx(i.default,{href:"/magic-tool",onClick:()=>z(!1),className:`block px-4 py-3 rounded-lg text-base font-medium transition-colors ${e.startsWith("/magic-tool")?"bg-primary/10 text-primary":"text-gray-700 hover:bg-gray-100"}`,children:"L'outil magique"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[r.jsx("h3",{className:"px-4 py-2 text-sm font-semibold text-gray-500 uppercase tracking-wide",children:"Cat\xe9gories"}),r.jsx("div",{className:"space-y-1",children:P.map(e=>{let t=$===e.name,s=B[e.name]||[];return(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{onClick:()=>A(t?null:e.name),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-100 transition-colors",type:"button",children:[r.jsx("span",{children:e.name}),r.jsx("svg",{className:`h-5 w-5 transition-transform ${t?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t&&r.jsx("div",{className:"pl-4 mt-1 space-y-1",children:s.length>0?s.map(e=>r.jsx(i.default,{href:`/categories/${e.slug}`,onClick:()=>z(!1),className:"block px-4 py-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors",children:e.name},e.id)):r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Chargement..."})})]},e.id)})})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:u?r.jsx("div",{className:"px-4 py-3",children:r.jsx("div",{className:"h-10 w-full animate-pulse rounded bg-gray-200"})}):s?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg bg-gray-50",children:[r.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary text-white text-lg font-semibold",children:(s.first_name?.[0]||s.username?.[0]||s.email[0]||"U").toUpperCase()}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:s.first_name&&s.last_name?`${s.first_name} ${s.last_name}`:s.username||s.email}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.email})]})]}),(p||f)&&(0,r.jsxs)(i.default,{href:p?"/admin":"/dashboard",onClick:()=>z(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Mon Tableau de bord"]}),(0,r.jsxs)("button",{onClick:()=>{k(!0),z(!1)},className:"w-full flex items-center justify-between px-4 py-3 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-100 transition-colors",type:"button",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),r.jsx("span",{children:"Ma s\xe9lection"})]}),v.length>0&&r.jsx("span",{className:"rounded-full bg-secondary px-2.5 py-0.5 text-xs font-semibold text-white",children:v.length})]}),(0,r.jsxs)("button",{onClick:()=>{W(),z(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium text-red-600 hover:bg-red-50 transition-colors",type:"button",children:[r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"D\xe9connexion"]})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i.default,{href:"/login",onClick:()=>z(!1),className:"block w-full text-center px-4 py-3 rounded-lg border border-primary text-primary font-medium hover:bg-primary/10 transition-colors",children:"Connexion"}),r.jsx(i.default,{href:"/register",onClick:()=>z(!1),className:"block w-full text-center px-4 py-3 rounded-lg bg-secondary text-white font-medium hover:bg-secondary/90 transition-colors",children:"Inscription"})]})})]})]})]})]})}let f=[{href:"/about",label:"\xc0 propos"},{href:"/faq",label:"FAQ"},{href:"/contact",label:"Contact"},{href:"/terms",label:"Conditions d'utilisation"}],g=[{href:"https://www.facebook.com",label:"Facebook"},{href:"https://www.instagram.com",label:"Instagram"},{href:"https://www.linkedin.com",label:"LinkedIn"}];function b(){let e=(0,a.usePathname)();return e?.startsWith("/admin")||"/register"===e||"/login"===e?null:(0,r.jsxs)("footer",{className:"bg-primary text-white",children:[(0,r.jsxs)("div",{className:"mx-auto grid max-w-6xl gap-12 px-6 py-16 md:grid-cols-3",children:[(0,r.jsxs)("div",{children:[r.jsx(i.default,{href:"/",className:"inline-block",children:r.jsx(n.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:120,height:40,className:"h-10 w-auto object-contain mb-4",priority:!0})}),r.jsx("p",{className:"mt-4 text-sm leading-relaxed text-white/80",children:"Avita compare les prix des meilleurs marchands marocains pour vous aider \xe0 trouver les bons plans high-tech et \xe9lectrom\xe9nager."})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-white",children:"Informations"}),r.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:f.map(e=>r.jsx("li",{children:r.jsx(i.default,{href:e.href,className:"transition-colors hover:text-secondary text-white/80",children:e.label})},e.href))})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-white",children:"Suivez-nous"}),r.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:g.map(e=>r.jsx("li",{children:r.jsx("a",{href:e.href,className:"transition-colors hover:text-secondary text-white/80",children:e.label})},e.href))})]})]}),(0,r.jsxs)("div",{className:"bg-primary-dark py-6 text-center text-xs text-white/60",children:["\xa9 ",new Date().getFullYear()," Avita — Tous droits r\xe9serv\xe9s."]})]})}function v(){return null}function w({children:e}){let t=(0,a.usePathname)(),{isAdmin:s}=(0,l.a)(),i=t?.startsWith("/admin"),n="/register"===t||"/login"===t,o=t?.startsWith("/forgot-password"),c=t?.includes("/products/")&&t?.includes("/edit"),d=s&&t&&(["/products/create","/products/upload"].includes(t)||c);return i||n||o||d?r.jsx("main",{className:"flex-1",children:e}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(p,{}),r.jsx("main",{className:"flex-1",children:e}),r.jsx(b,{}),r.jsx(v,{})]})}},5906:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(326),a=s(5047),l=s(732);function i({children:e}){let t=(0,a.usePathname)(),{isAdmin:s}=(0,l.a)(),i=t?.startsWith("/admin"),n=t?.includes("/products/")&&t?.includes("/edit"),o=s&&t&&(["/products/create","/products/upload"].includes(t)||n),c=t?.startsWith("/forgot-password"),d=t&&(["/register","/login"].includes(t)||c);return i||o||d?r.jsx("div",{className:"h-full w-full",children:e}):r.jsx("div",{className:"mx-auto max-w-6xl px-6 py-10",children:e})}},732:(e,t,s)=>{"use strict";s.d(t,{H:()=>n,a:()=>o});var r=s(326),a=s(7577),l=s(1980);let i=(0,a.createContext)(void 0);function n({children:e}){let[t,s]=function(){let[e,t]=(0,a.useState)(()=>null);return[e,(0,a.useCallback)(e=>{t(e)},[])]}(),[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),h=(0,a.useCallback)(async(e,t)=>{let r=await l.Z.post("/auth/login/",{email:e,password:t});console.log("Login response:",r.data),console.log("Login response keys:",Object.keys(r.data||{}));let a=r.data,i={key:a.key||a.token||a.token_key,access:a.access,refresh:a.refresh};if(!i.key&&!i.access)throw console.error("No token received in login response:",r.data),console.error("Response structure:",JSON.stringify(r.data,null,2)),Error("Aucun token re\xe7u lors de la connexion. R\xe9ponse: "+JSON.stringify(r.data));console.log("Token extracted successfully:",{hasKey:!!i.key,hasAccess:!!i.access,keyPreview:i.key?i.key.substring(0,10)+"...":"none"}),s(i);try{let e=function(e){if(!e){console.warn("getAuthHeader called with null tokens");return}if(e.access){let t={Authorization:`Bearer ${e.access}`};return console.log("Using Bearer token for auth"),t}if(e.key){let t={Authorization:`Token ${e.key}`};return console.log("Using Token for auth, token length:",e.key.length),t}console.warn("No valid token found in tokens object:",e)}(i);console.log("Fetching user with headers:",e);let t=await l.Z.get("/auth/user/",{headers:e});console.log("User response:",JSON.stringify(t.data,null,2)),console.log("User role from API:",t.data.role);let s={...t.data,role:t.data.role||"visitor"};console.log("Setting user data:",JSON.stringify(s,null,2)),o(s)}catch(e){throw console.error("Failed to fetch user profile after login:",e),console.error("Error response:",e.response?.data),console.error("Error status:",e.response?.status),e}},[s]),m=(0,a.useCallback)(async e=>{await l.Z.post("/auth/registration/",e)},[]),u=(0,a.useCallback)(()=>{s(null),o(null)},[s]),x=(0,a.useMemo)(()=>n?.role==="admin",[n]),p=(0,a.useMemo)(()=>n?.role==="client",[n]),f=(0,a.useMemo)(()=>n?.role==="user",[n]),g=(0,a.useMemo)(()=>n?.role==="visitor",[n]),b=(0,a.useMemo)(()=>({user:n,tokens:t,loading:c,isAdmin:x,isClient:p,isUser:f,isVisitor:g,login:h,register:m,logout:u}),[c,h,u,m,t,n,x,p,f,g]);return r.jsx(i.Provider,{value:b,children:e})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},2679:(e,t,s)=>{"use strict";s.d(t,{c:()=>i,r:()=>n});var r=s(326),a=s(7577);let l=(0,a.createContext)(void 0);function i({children:e}){let[t,s]=(0,a.useState)([]),i=(0,a.useCallback)(e=>{s(t=>t.some(t=>t.id===e.id)?t:[...t,e])},[]),n=(0,a.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),o=(0,a.useCallback)(e=>t.some(t=>t.id===e),[t]),c=(0,a.useMemo)(()=>({favorites:t,addFavorite:i,removeFavorite:n,isFavorite:o}),[i,t,o,n]);return r.jsx(l.Provider,{value:c,children:e})}function n(){let e=(0,a.useContext)(l);if(!e)throw Error("useFavorites must be used within FavoritesProvider");return e}},1980:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=s(4464).Z.create({baseURL:"https://api.azyo6271.odns.fr/api",withCredentials:!1})},2543:(e,t,s)=>{"use strict";s(1980)},179:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b,metadata:()=>g});var r=s(9510);s(7272);var a=s(8570);let l=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/app/providers.tsx`),{__esModule:i,$$typeof:n}=l;l.default;let o=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/app/providers.tsx#default`),c=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/components/layouts/MainContent.tsx`),{__esModule:d,$$typeof:h}=c;c.default;let m=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/components/layouts/MainContent.tsx#default`),u=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/components/layouts/ConditionalHeaderFooter.tsx`),{__esModule:x,$$typeof:p}=u;u.default;let f=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/components/layouts/ConditionalHeaderFooter.tsx#default`),g={title:"Avita — Comparateur de prix high-tech au Maroc",description:"Comparez les prix des smartphones, TV, \xe9lectrom\xe9nagers et produits high-tech au Maroc sur Avita."};function b({children:e}){return r.jsx("html",{lang:"fr",className:"h-full",children:r.jsx("body",{className:"flex h-full flex-col bg-white text-gray-900",children:r.jsx(o,{children:r.jsx(f,{children:r.jsx(m,{children:e})})})})})}},7272:()=>{}};