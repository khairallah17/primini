(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},579:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),r(8748),r(596),r(179),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8748)),"/Users/khairallahmohammed/Documents/primini/frontend/app/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,596)),"/Users/khairallahmohammed/Documents/primini/frontend/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,179)),"/Users/khairallahmohammed/Documents/primini/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/khairallahmohammed/Documents/primini/frontend/app/admin/page.tsx"],u="/admin/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2793:(e,t,r)=>{Promise.resolve().then(r.bind(r,2802))},9209:(e,t,r)=>{Promise.resolve().then(r.bind(r,9287)),Promise.resolve().then(r.bind(r,933)),Promise.resolve().then(r.bind(r,6618))},2802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(326),a=r(9965),i=r(2056);function n({children:e}){return s.jsx(a.Z,{requireAuth:!0,requireAdmin:!0,children:s.jsx(i.Z,{children:e})})}},9965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(326);r(7577);var a=r(5047),i=r(732);function n({children:e,requireAuth:t=!1,requireAdmin:r=!1,requireClient:n=!1,requireClientOrAdmin:l=!1,redirectTo:d="/login"}){(0,a.useRouter)();let{user:o,loading:c,isAdmin:u,isClient:x,isVisitor:p}=(0,i.a)();return c?s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsx("div",{className:"text-lg",children:"Chargement..."})}):(!t||o)&&(!r||u)&&(!n||x)&&(!l||x||u)?s.jsx(s.Fragment,{children:e}):null}},2056:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(326),a=r(7577),i=r(434),n=r(6226),l=r(5047),d=r(732);let o=[{title:"Tableau de bord",href:"/admin",icon:"\uD83D\uDCCA"},{title:"Gestion des produits",items:[{title:"Tous les produits",href:"/admin"},{title:"Cr\xe9er un produit",href:"/products/create"},{title:"Importer CSV",href:"/products/upload"}],icon:"\uD83D\uDCE6"},{title:"Gestion des utilisateurs",href:"/admin/users",icon:"\uD83D\uDC65"},{title:"Configuration AdSense",href:"/admin/adsense",icon:"\uD83D\uDCB0"}];function c({children:e}){let t=(0,l.usePathname)(),{user:r}=(0,d.a)(),[c,u]=(0,a.useState)(!0),x=e=>"/admin"===e?"/admin"===t:"/admin/users"===e?t.startsWith("/admin/users"):t.startsWith(e);return(0,s.jsxs)("div",{className:"flex h-screen w-full overflow-hidden bg-gray-50",children:[(0,s.jsxs)("aside",{className:`${c?"w-64":"w-20"} fixed left-0 top-0 z-50 h-screen bg-primary border-r border-primary-dark/30 transition-all duration-300 flex flex-col shadow-lg`,children:[(0,s.jsxs)("div",{className:"flex h-24 items-center justify-between border-b border-primary-dark/30 px-4",children:[s.jsx(i.default,{href:"/",className:`flex items-center ${c?"justify-start":"justify-center"} flex-1`,children:s.jsx(n.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:c?180:50,height:c?60:50,className:`${c?"h-16 w-auto":"h-12 w-12"} object-contain transition-all`,priority:!0})}),s.jsx("button",{onClick:()=>u(!c),className:"rounded-md p-2 text-white/80 hover:bg-primary-dark/30 hover:text-white transition-colors","aria-label":"Toggle sidebar",children:c?s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:s.jsx("ul",{className:"space-y-1",children:o.map((e,t)=>e.items?(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{className:`flex items-center gap-3 px-3 py-2 text-sm font-medium text-white/90 ${!c&&"justify-center"}`,children:[s.jsx("span",{className:"text-lg",children:e.icon}),c&&s.jsx("span",{children:e.title})]}),c&&s.jsx("ul",{className:"ml-6 mt-1 space-y-1",children:e.items.map(e=>s.jsx("li",{children:s.jsx(i.default,{href:e.href,className:`block rounded-md px-3 py-2 text-sm transition-colors ${x(e.href)?"bg-white/20 text-white font-medium":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:e.title})},e.href))})]},t):s.jsx("li",{children:(0,s.jsxs)(i.default,{href:e.href,className:`flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors ${x(e.href)?"bg-white/20 text-white":"text-white/80 hover:bg-white/10 hover:text-white"} ${!c&&"justify-center"}`,children:[s.jsx("span",{className:"text-lg",children:e.icon}),c&&s.jsx("span",{children:e.title})]})},e.href))})}),c&&r&&s.jsx("div",{className:"border-t border-primary-dark/30 p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20 text-white font-semibold",children:(r.first_name?.[0]||r.username?.[0]||r.email[0]||"U").toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"truncate text-sm font-medium text-white",children:r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.username||r.email}),s.jsx("p",{className:"truncate text-xs text-white/70",children:r.email})]})]})})]}),s.jsx("div",{className:`flex-1 w-full h-screen overflow-y-auto transition-all duration-300 ${c?"ml-64":"ml-20"}`,style:{marginTop:0},children:s.jsx("div",{className:"h-full w-full",children:e})})]})}},9287:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(326),a=r(7577),i=r(5047),n=r(732),l=r(9806),d=r(434);function o(){(0,i.useRouter)();let{tokens:e}=(0,n.a)(),[t,r]=(0,a.useState)("pending"),[o,c]=(0,a.useState)(!0),[u,x]=(0,a.useState)([]),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)([]),[y,f]=(0,a.useState)(null),[b,j]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),[N,k]=(0,a.useState)(null),[_,C]=(0,a.useState)({}),[P,S]=(0,a.useState)({}),[$,A]=(0,a.useState)(null),[D,q]=(0,a.useState)(null),[E,R]=(0,a.useState)(""),[M,T]=(0,a.useState)(""),[z,F]=(0,a.useState)(null),[Z,O]=(0,a.useState)({}),W=async(r=1)=>{if(e?.key){c(!0),j(null);try{let s;s="pending"===t?await (0,l.BB)(e.key,r):"all"===t?await (0,l.Dg)(e.key,r,E||void 0,M||void 0):await (0,l.ch)(e.key,r,E||void 0),x(s.results),m(s)}catch(e){j(e.response?.data?.detail||e.message||"Erreur lors du chargement")}finally{c(!1)}}},L=async(t=1)=>{if(e?.key)try{let r=await (0,l.EE)(e.key,t);g(r.results),f(r)}catch(e){console.error("Error loading pending offers:",e)}},U=async t=>{if(e?.key){k(t);try{await (0,l.kR)(t,e.key),await L(y?.current_page||1)}catch(e){j(e.response?.data?.detail||e.message||"Erreur lors de l'approbation")}finally{k(null)}}},B=async t=>{if(!e?.key)return;let r=P[t]||"";if(!r.trim()){j("Veuillez fournir une raison de rejet");return}k(t);try{await (0,l.t$)(t,r,e.key),q(null),S({...P,[t]:""}),await L(y?.current_page||1)}catch(e){j(e.response?.data?.detail||e.message||"Erreur lors du rejet")}finally{k(null)}},G=async t=>{if(e?.key){w(t);try{await (0,l.h7)(t,e.key),await W(p?.current_page||1)}catch(e){j(e.response?.data?.detail||e.message||"Erreur lors de l'approbation")}finally{w(null)}}},I=async t=>{if(!e?.key)return;let r=_[t]||"";if(!r.trim()){j("Veuillez fournir une raison de rejet");return}w(t);try{await (0,l.ex)(t,r,e.key),A(null),C({..._,[t]:""}),await W(p?.current_page||1)}catch(e){j(e.response?.data?.detail||e.message||"Erreur lors du rejet")}finally{w(null)}},V=e=>e?s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"}`,children:{pending:"En attente",approved:"Approuv\xe9",rejected:"Rejet\xe9"}[e]||e}):null,X=e=>{O(t=>({...t,[e]:!0}))},H=e=>{if(e.image_display)return e.image_display;if(e.image_file){let t="http://api.azyo6271.odns.fr/api".replace("/api",""),r=e.image_file.startsWith("/")?e.image_file:`/${e.image_file}`;return`${t}${r}`}if(!e.image)return null;if(e.image.startsWith("http://")||e.image.startsWith("https://"))return e.image;if(e.image.startsWith("/media/")||e.image.startsWith("media/")){let t="http://api.azyo6271.odns.fr/api".replace("/api",""),r=e.image.startsWith("/")?e.image:`/${e.image}`;return`${t}${r}`}if(!e.image.includes("://")){let t="http://api.azyo6271.odns.fr/api".replace("/api",""),r=e.image.startsWith("/")?e.image:`/media/products/${e.image}`;return`${t}${r}`}return e.image},J=e=>{let r=H(e);return(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[r&&!Z[e.id]?s.jsx("img",{src:r,alt:e.name,className:"h-12 w-12 rounded object-cover mr-4",onError:()=>X(e.id)}):s.jsx("div",{className:"h-12 w-12 rounded bg-gray-200 mr-4 flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-gray-400",children:"N/A"})}),(0,s.jsxs)("div",{children:[e.slug?s.jsx(d.default,{href:`/product/${e.slug}`,className:"text-sm font-medium text-gray-900 hover:text-primary",children:e.name}):s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name}),e.brand&&s.jsx("p",{className:"text-sm text-gray-500",children:e.brand})]})]})}),"all"===t&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V(e.approval_status)}),"my"!==t&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.created_by_email||"admin"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString("fr-FR"):"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsx("div",{className:"flex justify-end gap-2",children:"pending"===t?$===e.slug?(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[s.jsx("textarea",{placeholder:"Raison du rejet...",value:_[e.slug]||"",onChange:t=>C({..._,[e.slug]:t.target.value}),className:"w-full rounded-md border-gray-300 text-sm",rows:2}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>I(e.slug),disabled:v===e.slug,className:"rounded-md bg-red-600 px-3 py-1 text-xs text-white hover:bg-red-700 disabled:opacity-50",children:v===e.slug?"...":"Confirmer"}),s.jsx("button",{onClick:()=>{A(null),C({..._,[e.slug]:""})},className:"rounded-md bg-gray-200 px-3 py-1 text-xs text-gray-700 hover:bg-gray-300",children:"Annuler"})]})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:()=>G(e.slug),disabled:v===e.slug,className:"rounded-md bg-green-600 px-3 py-1 text-xs text-white hover:bg-green-700 disabled:opacity-50",children:v===e.slug?"...":"Approuver"}),s.jsx("button",{onClick:()=>A(e.slug),disabled:v===e.slug,className:"rounded-md bg-red-600 px-3 py-1 text-xs text-white hover:bg-red-700 disabled:opacity-50",children:"Rejeter"})]}):(0,s.jsxs)(s.Fragment,{children:[e.slug?s.jsx(d.default,{href:`/products/${e.slug}/edit`,className:"rounded-md bg-blue-600 px-3 py-1 text-xs text-white hover:bg-blue-700",children:"Modifier"}):s.jsx("span",{className:"text-xs text-gray-400",children:"N/A"}),"all"===t&&"pending"===e.approval_status&&($===e.slug?(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[s.jsx("textarea",{placeholder:"Raison du rejet...",value:_[e.slug]||"",onChange:t=>C({..._,[e.slug]:t.target.value}),className:"w-full rounded-md border-gray-300 text-sm",rows:2}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>I(e.slug),disabled:v===e.slug,className:"rounded-md bg-red-600 px-3 py-1 text-xs text-white hover:bg-red-700 disabled:opacity-50",children:v===e.slug?"...":"Confirmer"}),s.jsx("button",{onClick:()=>{A(null),C({..._,[e.slug]:""})},className:"rounded-md bg-gray-200 px-3 py-1 text-xs text-gray-700 hover:bg-gray-300",children:"Annuler"})]})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:()=>G(e.slug),disabled:v===e.slug,className:"rounded-md bg-green-600 px-3 py-1 text-xs text-white hover:bg-green-700 disabled:opacity-50",children:v===e.slug?"...":"Approuver"}),s.jsx("button",{onClick:()=>A(e.slug),disabled:v===e.slug,className:"rounded-md bg-red-600 px-3 py-1 text-xs text-white hover:bg-red-700 disabled:opacity-50",children:"Rejeter"})]}))]})})})]},e.id)};return o&&!u.length?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx("div",{className:"text-lg",children:"Chargement..."})}):s.jsx("div",{className:"h-full w-full bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-7xl",children:[s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de bord Admin"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"G\xe9rez les produits, utilisateurs et param\xe8tres"})]})}),s.jsx("div",{className:"mb-6 border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,s.jsxs)("button",{onClick:()=>{r("pending"),R(""),T("")},className:`whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium ${"pending"===t?"border-primary text-primary":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:["En attente","pending"===t&&s.jsx("span",{className:"ml-2 rounded-full bg-primary px-2 py-0.5 text-xs text-white",children:(p?.count||0)+(y?.count||0)})]}),s.jsx("button",{onClick:()=>{r("all"),R(""),T("")},className:`whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium ${"all"===t?"border-primary text-primary":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Tous les produits"}),s.jsx("button",{onClick:()=>{r("my"),R(""),T("")},className:`whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium ${"my"===t?"border-primary text-primary":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Mes produits"})]})}),"all"===t&&(0,s.jsxs)("div",{className:"mb-6 flex gap-4 rounded-md bg-white p-4 shadow",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:M,onChange:e=>T(e.target.value),className:"w-full rounded-md border-gray-300 px-3 py-2 text-sm"})}),(0,s.jsxs)("select",{value:E,onChange:e=>{R(e.target.value),W(1)},className:"rounded-md border-gray-300 px-3 py-2 text-sm",children:[s.jsx("option",{value:"",children:"Tous les statuts"}),s.jsx("option",{value:"pending",children:"En attente"}),s.jsx("option",{value:"approved",children:"Approuv\xe9"}),s.jsx("option",{value:"rejected",children:"Rejet\xe9"})]})]}),"my"===t&&s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("select",{value:E,onChange:e=>{R(e.target.value),W(1)},className:"rounded-md border-gray-300 px-3 py-2 text-sm",children:[s.jsx("option",{value:"",children:"Tous les statuts"}),s.jsx("option",{value:"pending",children:"En attente"}),s.jsx("option",{value:"approved",children:"Approuv\xe9"}),s.jsx("option",{value:"rejected",children:"Rejet\xe9"})]})}),"pending"===t&&(0,s.jsxs)("div",{className:"mb-6 rounded-md bg-blue-50 p-4 text-blue-800",children:[s.jsx("p",{className:"font-semibold",children:"\xc9l\xe9ments en attente d'approbation"}),(0,s.jsxs)("p",{className:"mt-1 text-sm",children:[p?.count||0," produit(s) et ",y?.count||0," offre(s) en attente"]})]}),b&&s.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4 text-red-800",children:b}),"pending"===t&&(0,s.jsxs)(s.Fragment,{children:[u.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"Produits en attente"}),(0,s.jsxs)("div",{className:"overflow-hidden bg-white shadow rounded-lg",children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Produit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Cr\xe9\xe9 par"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:u.map(J)})]})}),p&&p.total_pages>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-gray-50 px-6 py-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",p.current_page," sur ",p.total_pages," (",p.count," produit(s))"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[p.previous_page&&s.jsx("button",{onClick:()=>W(p.previous_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Pr\xe9c\xe9dent"}),p.next_page&&s.jsx("button",{onClick:()=>W(p.next_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Suivant"})]})]})]})]}),h.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"Offres en attente"}),(0,s.jsxs)("div",{className:"overflow-hidden bg-white shadow rounded-lg",children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Produit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Marchand"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Prix"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Cr\xe9\xe9 par"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:h.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.product?.slug?s.jsx(d.default,{href:`/product/${e.product.slug}`,className:"hover:text-primary",children:e.product.name}):e.product?.name||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.merchant?.name||"N/A"}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["number"==typeof e.price?e.price.toFixed(2):parseFloat(String(e.price||0)).toFixed(2)," ",e.currency||"MAD"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"in_stock"===e.stock_status?"bg-green-100 text-green-800":"out_of_stock"===e.stock_status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:"in_stock"===e.stock_status?"En stock":"out_of_stock"===e.stock_status?"Rupture":"Stock faible"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.created_by_email||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date_updated?new Date(e.date_updated).toLocaleDateString("fr-FR"):"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:D===e.id?(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[s.jsx("textarea",{placeholder:"Raison du rejet...",value:P[e.id]||"",onChange:t=>S({...P,[e.id]:t.target.value}),className:"w-full rounded-md border-gray-300 text-sm",rows:2}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>B(e.id),disabled:N===e.id,className:"rounded-md bg-red-600 px-3 py-1 text-xs text-white hover:bg-red-700 disabled:opacity-50",children:N===e.id?"...":"Confirmer"}),s.jsx("button",{onClick:()=>{q(null),S({...P,[e.id]:""})},className:"rounded-md bg-gray-200 px-3 py-1 text-xs text-gray-700 hover:bg-gray-300",children:"Annuler"})]})]}):(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>U(e.id),disabled:N===e.id,className:"rounded-md bg-green-600 px-3 py-1 text-xs text-white hover:bg-green-700 disabled:opacity-50",children:N===e.id?"...":"Approuver"}),s.jsx("button",{onClick:()=>q(e.id),disabled:N===e.id,className:"rounded-md bg-red-600 px-3 py-1 text-xs text-white hover:bg-red-700 disabled:opacity-50",children:"Rejeter"})]})})]},e.id))})]})}),y&&y.total_pages>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-gray-50 px-6 py-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",y.current_page," sur ",y.total_pages," (",y.count," offre(s))"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[y.previous_page&&s.jsx("button",{onClick:()=>L(y.previous_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Pr\xe9c\xe9dent"}),y.next_page&&s.jsx("button",{onClick:()=>L(y.next_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Suivant"})]})]})]})]}),0===u.length&&0===h.length&&!o&&s.jsx("div",{className:"bg-white p-12 text-center shadow rounded-lg",children:s.jsx("p",{className:"text-lg text-gray-500",children:"Aucun \xe9l\xe9ment en attente d'approbation"})})]}),"pending"!==t&&s.jsx(s.Fragment,{children:0===u.length?s.jsx("div",{className:"bg-white p-12 text-center shadow rounded-lg",children:s.jsx("p",{className:"text-lg text-gray-500",children:"all"===t?"Aucun produit trouv\xe9":"Aucun produit cr\xe9\xe9"})}):(0,s.jsxs)("div",{className:"overflow-hidden bg-white shadow rounded-lg",children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Produit"}),"all"===t&&s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Statut"}),"my"!==t&&s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Cr\xe9\xe9 par"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:u.map(J)})]})}),p&&p.total_pages>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-gray-50 px-6 py-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",p.current_page," sur ",p.total_pages," (",p.count," ","produit(s) au total)"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[p.previous_page&&s.jsx("button",{onClick:()=>W(p.previous_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Pr\xe9c\xe9dent"}),p.next_page&&s.jsx("button",{onClick:()=>W(p.next_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Suivant"})]})]})]})})]})})}function c(){return s.jsx(o,{})}},9806:(e,t,r)=>{"use strict";r.d(t,{BB:()=>l,Dg:()=>c,EE:()=>u,ch:()=>n,ex:()=>o,g4:()=>i,h7:()=>d,kR:()=>x,t$:()=>p});var s=r(1980);function a(e){return e?{Authorization:`Token ${e}`}:{}}async function i(e,t){let r=new FormData;return r.append("file",e),(await s.Z.post("/products/upload_csv/",r,{headers:{...a(t),"Content-Type":"multipart/form-data"}})).data}async function n(e,t=1,r){let i={page:t.toString()};return r&&(i.approval_status=r),(await s.Z.get("/products/my_products/",{headers:a(e),params:i})).data}async function l(e,t=1){return(await s.Z.get("/products/pending/",{headers:a(e),params:{page:t}})).data}async function d(e,t){return(await s.Z.post(`/products/${e}/approve/`,{action:"approve"},{headers:a(t)})).data}async function o(e,t,r){return(await s.Z.post(`/products/${e}/approve/`,{action:"reject",rejection_reason:t},{headers:a(r)})).data}async function c(e,t=1,r,i){let n={page:t.toString()};return r&&(n.approval_status=r),i&&(n.search=i),(await s.Z.get("/products/",{headers:a(e),params:n})).data}async function u(e,t=1){return(await s.Z.get("/offers/pending/",{headers:{Authorization:`Token ${e}`},params:{page:t}})).data}async function x(e,t){return(await s.Z.post(`/offers/${e}/approve/`,{},{headers:{Authorization:`Token ${t}`}})).data}async function p(e,t,r){return(await s.Z.post(`/offers/${e}/reject/`,{rejection_reason:t},{headers:{Authorization:`Token ${r}`}})).data}},933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=r(4129);function a(e){let{reason:t,children:r}=e;throw new s.BailoutToCSRError(t)}},6618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return i}});let s=r(326),a=r(5403);function i(e){let{moduleIds:t}=e,r=(0,a.getExpectedRequestStore)("next/dynamic css"),i=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,s.jsx)(s.Fragment,{children:i.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var s=r(8570);let a=(0,s.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/app/admin/layout.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let l=(0,s.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/app/admin/layout.tsx#default`)},8748:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(9510);let a=(0,r(8318).default)(()=>r.e(2386).then(r.bind(r,2386)),{loadableGenerated:{modules:["app/admin/page.tsx -> ../../components/screens/AdminDashboardScreen"]},ssr:!1});function i(){return s.jsx(a,{})}},8318:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(4567),a=r.n(s)},4567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let s=r(3370);r(9510),r(1159);let a=s._(r(6155));function i(e,t){var r;let s={loading:e=>{let{error:t,isLoading:r,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let i={...s,...t};return(0,a.default)({...i,modules:null==(r=i.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3689:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("/Users/khairallahmohammed/Documents/primini/frontend/node_modules/next/dist/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.js")},6155:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let s=r(9510),a=r(1159),i=r(3689),n=r(4459);function l(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},o=function(e){let t={...d,...e},r=(0,a.lazy)(()=>t.loader().then(l)),o=t.loading;function c(e){let l=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,d=t.ssr?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.PreloadCss,{moduleIds:t.modules}),(0,s.jsx)(r,{...e})]}):(0,s.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(a.Suspense,{fallback:l,children:d})}return c.displayName="LoadableComponent",c}},4459:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("/Users/khairallahmohammed/Documents/primini/frontend/node_modules/next/dist/shared/lib/lazy-dynamic/preload-css.js")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9797,7325],()=>r(579));module.exports=s})();