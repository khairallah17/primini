(()=>{var e={};e.id=5625,e.ids=[5625],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2039:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),r(6314),r(596),r(179),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["admin",{children:["adsense",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6314)),"/Users/khairallahmohammed/Documents/primini/frontend/app/admin/adsense/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,596)),"/Users/khairallahmohammed/Documents/primini/frontend/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,179)),"/Users/khairallahmohammed/Documents/primini/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/khairallahmohammed/Documents/primini/frontend/app/admin/adsense/page.tsx"],m="/admin/adsense/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/adsense/page",pathname:"/admin/adsense",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2793:(e,t,r)=>{Promise.resolve().then(r.bind(r,2802))},467:(e,t,r)=>{Promise.resolve().then(r.bind(r,3875))},2802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(326),a=r(9965),i=r(2056);function n({children:e}){return s.jsx(a.Z,{requireAuth:!0,requireAdmin:!0,children:s.jsx(i.Z,{children:e})})}},9965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(326);r(7577);var a=r(5047),i=r(732);function n({children:e,requireAuth:t=!1,requireAdmin:r=!1,requireClient:n=!1,requireClientOrAdmin:l=!1,redirectTo:d="/login"}){(0,a.useRouter)();let{user:o,loading:c,isAdmin:m,isClient:u,isVisitor:p}=(0,i.a)();return c?s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsx("div",{className:"text-lg",children:"Chargement..."})}):(!t||o)&&(!r||m)&&(!n||u)&&(!l||u||m)?s.jsx(s.Fragment,{children:e}):null}},2056:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(326),a=r(7577),i=r(434),n=r(6226),l=r(5047),d=r(732);let o=[{title:"Tableau de bord",href:"/admin",icon:"\uD83D\uDCCA"},{title:"Gestion des produits",items:[{title:"Tous les produits",href:"/admin"},{title:"Cr\xe9er un produit",href:"/products/create"},{title:"Importer CSV",href:"/products/upload"}],icon:"\uD83D\uDCE6"},{title:"Gestion des utilisateurs",href:"/admin/users",icon:"\uD83D\uDC65"},{title:"Configuration AdSense",href:"/admin/adsense",icon:"\uD83D\uDCB0"}];function c({children:e}){let t=(0,l.usePathname)(),{user:r}=(0,d.a)(),[c,m]=(0,a.useState)(!0),u=e=>"/admin"===e?"/admin"===t:"/admin/users"===e?t.startsWith("/admin/users"):t.startsWith(e);return(0,s.jsxs)("div",{className:"flex h-screen w-full overflow-hidden bg-gray-50",children:[(0,s.jsxs)("aside",{className:`${c?"w-64":"w-20"} fixed left-0 top-0 z-50 h-screen bg-primary border-r border-primary-dark/30 transition-all duration-300 flex flex-col shadow-lg`,children:[(0,s.jsxs)("div",{className:"flex h-24 items-center justify-between border-b border-primary-dark/30 px-4",children:[s.jsx(i.default,{href:"/",className:`flex items-center ${c?"justify-start":"justify-center"} flex-1`,children:s.jsx(n.default,{src:"/images/avito-colors.jpeg",alt:"Avita",width:c?180:50,height:c?60:50,className:`${c?"h-16 w-auto":"h-12 w-12"} object-contain transition-all`,priority:!0})}),s.jsx("button",{onClick:()=>m(!c),className:"rounded-md p-2 text-white/80 hover:bg-primary-dark/30 hover:text-white transition-colors","aria-label":"Toggle sidebar",children:c?s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:s.jsx("ul",{className:"space-y-1",children:o.map((e,t)=>e.items?(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{className:`flex items-center gap-3 px-3 py-2 text-sm font-medium text-white/90 ${!c&&"justify-center"}`,children:[s.jsx("span",{className:"text-lg",children:e.icon}),c&&s.jsx("span",{children:e.title})]}),c&&s.jsx("ul",{className:"ml-6 mt-1 space-y-1",children:e.items.map(e=>s.jsx("li",{children:s.jsx(i.default,{href:e.href,className:`block rounded-md px-3 py-2 text-sm transition-colors ${u(e.href)?"bg-white/20 text-white font-medium":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:e.title})},e.href))})]},t):s.jsx("li",{children:(0,s.jsxs)(i.default,{href:e.href,className:`flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors ${u(e.href)?"bg-white/20 text-white":"text-white/80 hover:bg-white/10 hover:text-white"} ${!c&&"justify-center"}`,children:[s.jsx("span",{className:"text-lg",children:e.icon}),c&&s.jsx("span",{children:e.title})]})},e.href))})}),c&&r&&s.jsx("div",{className:"border-t border-primary-dark/30 p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20 text-white font-semibold",children:(r.first_name?.[0]||r.username?.[0]||r.email[0]||"U").toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"truncate text-sm font-medium text-white",children:r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.username||r.email}),s.jsx("p",{className:"truncate text-xs text-white/70",children:r.email})]})]})})]}),s.jsx("div",{className:`flex-1 w-full h-screen overflow-y-auto transition-all duration-300 ${c?"ml-64":"ml-20"}`,style:{marginTop:0},children:s.jsx("div",{className:"h-full w-full",children:e})})]})}},3875:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(326),a=r(7577),i=r(732),n=r(7993);let l={homepage_top:"Page d'accueil - Haut",homepage_middle:"Page d'accueil - Milieu",homepage_bottom:"Page d'accueil - Bas",product_detail_sidebar:"Page produit - Barre lat\xe9rale",product_detail_bottom:"Page produit - Bas",category_page_top:"Page cat\xe9gorie - Haut",search_results_middle:"R\xe9sultats de recherche - Milieu"};function d(e){return e?"string"==typeof e?{ad_type:"adsense",adsense_id:e,banner_image:"",banner_link:""}:{ad_type:e.ad_type||"adsense",adsense_id:e.adsense_id||"",banner_image:e.banner_image||"",banner_link:e.banner_link||""}:{ad_type:"adsense",adsense_id:"",banner_image:"",banner_link:""}}function o(){let{tokens:e}=(0,i.a)(),[t,r]=(0,a.useState)(!0),[o,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)({}),p=(0,a.useRef)({}),[x,h]=(0,a.useState)({enabled:!1,publisher_id:"",homepage_top:"",homepage_middle:"",homepage_bottom:"",product_detail_sidebar:"",product_detail_bottom:"",category_page_top:"",search_results_middle:""}),[g,f]=(0,a.useState)(null),b=async t=>{if(t.preventDefault(),!e?.key){f({type:"error",text:"Vous devez \xeatre connect\xe9"});return}c(!0),f(null);try{await (0,n.L_)(x,e.key),f({type:"success",text:"Configuration AdSense mise \xe0 jour avec succ\xe8s!"})}catch(e){f({type:"error",text:e.response?.data?.detail||"Erreur lors de la mise \xe0 jour"})}finally{c(!1)}},y=(e,t)=>{h(r=>({...r,[e]:t}))},j=(e,t)=>{let r={...d(x[e]),...t};h(t=>({...t,[e]:r}))},_=e=>d(x[e]);return t?s.jsx("div",{className:"flex items-center justify-center py-20",children:"Chargement..."}):s.jsx("div",{className:"h-full w-full bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-4xl",children:[s.jsx("h1",{className:"mb-8 text-3xl font-bold text-gray-900",children:"Configuration Google AdSense"}),g&&s.jsx("div",{className:`mb-6 rounded-md p-4 ${"success"===g.type?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:g.text}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6 rounded-lg bg-white p-8 shadow",children:[s.jsx("div",{children:(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:x.enabled,onChange:e=>y("enabled",e.target.checked),className:"mr-2 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Activer Google AdSense"})]})}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Publisher ID (ca-pub-XXXXXXXXXX)"}),s.jsx("input",{type:"text",value:x.publisher_id,onChange:e=>y("publisher_id",e.target.value),placeholder:"ca-pub-XXXXXXXXXX",className:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-primary focus:ring-primary"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Trouvez votre Publisher ID dans votre compte Google AdSense (requis pour les publicit\xe9s AdSense)"})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"Emplacements des publicit\xe9s"}),s.jsx("p",{className:"mb-6 text-sm text-gray-500",children:"Pour chaque emplacement, vous pouvez choisir entre une publicit\xe9 AdSense ou une banni\xe8re image personnalis\xe9e."}),s.jsx("div",{className:"space-y-8",children:Object.keys(l).map(t=>{let r=_(t);return(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:l[t]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de publicit\xe9"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:`${t}_type`,value:"adsense",checked:"adsense"===r.ad_type,onChange:e=>j(t,{ad_type:"adsense"}),className:"mr-2 h-4 w-4 border-gray-300 text-primary focus:ring-primary"}),s.jsx("span",{className:"text-sm text-gray-700",children:"AdSense ID"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:`${t}_type`,value:"banner",checked:"banner"===r.ad_type,onChange:e=>j(t,{ad_type:"banner"}),className:"mr-2 h-4 w-4 border-gray-300 text-primary focus:ring-primary"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Banni\xe8re Image"})]})]})]}),"adsense"===r.ad_type&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AdSense Slot ID"}),s.jsx("input",{type:"text",value:r.adsense_id||"",onChange:e=>j(t,{adsense_id:e.target.value}),placeholder:"ID du slot publicitaire (ex: 1234567890)",className:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-primary focus:ring-primary"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Laissez vide pour d\xe9sactiver cet emplacement"})]}),"banner"===r.ad_type&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de la banni\xe8re"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("input",{ref:e=>{p.current[t]=e},type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:async r=>{let s=r.target.files?.[0];if(s&&e?.key){u(e=>({...e,[t]:!0}));try{let r=await (0,n.xf)(s,t,e.key);j(t,{banner_image:r.url}),f({type:"success",text:"Image t\xe9l\xe9charg\xe9e avec succ\xe8s!"})}catch(e){f({type:"error",text:e.response?.data?.detail||"Erreur lors du t\xe9l\xe9chargement de l'image"})}finally{u(e=>({...e,[t]:!1}))}}},className:"hidden",id:`file-input-${t}`}),s.jsx("label",{htmlFor:`file-input-${t}`,className:"flex cursor-pointer items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:m[t]?"T\xe9l\xe9chargement...":"Choisir un fichier"})]}),r.banner_image&&s.jsx("button",{type:"button",onClick:()=>{j(t,{banner_image:""}),p.current[t]&&(p.current[t].value="")},className:"rounded-md border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 hover:bg-red-100",children:"Supprimer"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Formats accept\xe9s: JPEG, PNG, GIF, WebP (max 5MB)"}),r.banner_image&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-blue-600",children:["Image actuelle: ",r.banner_image]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lien de destination (optionnel)"}),s.jsx("input",{type:"url",value:r.banner_link||"",onChange:e=>j(t,{banner_link:e.target.value}),placeholder:"https://example.com",className:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-primary focus:ring-primary"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"URL vers laquelle rediriger lorsque l'utilisateur clique sur la banni\xe8re"})]}),r.banner_image&&(0,s.jsxs)("div",{className:"mt-4",children:[s.jsx("p",{className:"mb-2 text-sm font-medium text-gray-700",children:"Aper\xe7u:"}),s.jsx("div",{className:"border border-gray-200 rounded-md p-4 bg-gray-50",children:r.banner_link?s.jsx("a",{href:r.banner_link,target:"_blank",rel:"noopener noreferrer",className:"block",children:s.jsx("img",{src:r.banner_image,alt:"Banner preview",className:"max-w-full h-auto",onError:e=>{e.target.style.display="none"}})}):s.jsx("img",{src:r.banner_image,alt:"Banner preview",className:"max-w-full h-auto",onError:e=>{e.target.style.display="none"}})})]})]})]},t)})})]}),s.jsx("div",{className:"flex justify-end gap-4 pt-6",children:s.jsx("button",{type:"submit",disabled:o,className:"rounded-md bg-primary px-6 py-2 text-sm font-medium text-white hover:bg-primary/90 disabled:opacity-50",children:o?"Enregistrement...":"Enregistrer la configuration"})})]})]})})}function c(){return s.jsx(o,{})}},7993:(e,t,r)=>{"use strict";r.d(t,{L_:()=>i,xf:()=>a});var s=r(1980);async function a(e,t,r){let a=new FormData;return a.append("file",e),a.append("slot_key",t),(await s.Z.post("/settings/upload_banner_image/",a,{headers:{Authorization:`Token ${r}`,"Content-Type":"multipart/form-data"}})).data}async function i(e,t){let r={enabled:e.enabled,publisher_id:e.publisher_id};["homepage_top","homepage_middle","homepage_bottom","product_detail_sidebar","product_detail_bottom","category_page_top","search_results_middle"].forEach(t=>{let s=e[t];null==s||""===s?r[t]="":"object"==typeof s&&"ad_type"in s?r[t]=JSON.stringify(s):r[t]=s}),await s.Z.post("/settings/adsense_config/",r,{headers:{Authorization:`Token ${t}`}})}},6314:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(9510),a=r(8570);let i=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/components/screens/AdSenseSettingsScreen.tsx`),{__esModule:n,$$typeof:l}=i;i.default;let d=(0,a.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/components/screens/AdSenseSettingsScreen.tsx#default`);function o(){return s.jsx(d,{})}},596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var s=r(8570);let a=(0,s.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/app/admin/layout.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let l=(0,s.createProxy)(String.raw`/Users/khairallahmohammed/Documents/primini/frontend/app/admin/layout.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9797,8391],()=>r(2039));module.exports=s})();