(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5711:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(9521),r(179),r(5866);var s=r(3191),a=r(8716),n=r(7922),i=r.n(n),l=r(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9521)),"/Users/khairallahmohammed/Documents/primini/frontend/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,179)),"/Users/khairallahmohammed/Documents/primini/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/khairallahmohammed/Documents/primini/frontend/app/dashboard/page.tsx"],u="/dashboard/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4382:(e,t,r)=>{Promise.resolve().then(r.bind(r,4246)),Promise.resolve().then(r.bind(r,933)),Promise.resolve().then(r.bind(r,6618))},9965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(326);r(7577);var a=r(5047),n=r(732);function i({children:e,requireAuth:t=!1,requireAdmin:r=!1,requireClient:i=!1,requireClientOrAdmin:l=!1,redirectTo:d="/login"}){(0,a.useRouter)();let{user:o,loading:c,isAdmin:u,isClient:p,isVisitor:x}=(0,n.a)();return c?s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsx("div",{className:"text-lg",children:"Chargement..."})}):(!t||o)&&(!r||u)&&(!i||p)&&(!l||p||u)?s.jsx(s.Fragment,{children:e}):null}},4246:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(326),a=r(7577),n=r(434),i=r(732),l=r(9965),d=r(9806);function o(){let{tokens:e}=(0,i.a)(),[t,r]=(0,a.useState)(!0),[l,o]=(0,a.useState)([]),[c,u]=(0,a.useState)(null),[p,x]=(0,a.useState)(null),[m,h]=(0,a.useState)("all"),[g,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null),[b,v]=(0,a.useState)({}),w=async(t=1)=>{if(e?.key){r(!0),x(null);try{let r=await (0,d.ch)(e.key,t,"all"!==m?m:void 0);o(r.results),u(r)}catch(e){x(e.response?.data?.detail||e.message||"Erreur lors du chargement des produits")}finally{r(!1)}}},N=async t=>{let r=t.target.files?.[0];if(r&&e?.key){if(!["csv","xlsx","xls"].includes(r.name.toLowerCase().split(".").pop()||"")){x("Le fichier doit \xeatre un CSV ou Excel (.xlsx, .xls)");return}f(!0),x(null),j(null);try{let s=await (0,d.g4)(r,e.key);j(s),await w(c?.current_page||1),t.target.value=""}catch(e){x(e.response?.data?.detail||e.message||"Erreur lors de l'upload")}finally{f(!1)}}},_=e=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",P=e=>({pending:"En attente",approved:"Approuv\xe9",rejected:"Rejet\xe9"})[e]||e,k={total:c?.count||0,pending:l.filter(e=>"pending"===e.approval_status).length,approved:l.filter(e=>"approved"===e.approval_status).length,rejected:l.filter(e=>"rejected"===e.approval_status).length};return t&&0===l.length?s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsx("div",{className:"text-lg",children:"Chargement..."})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mon Tableau de bord"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(n.default,{href:"/products/create",className:"rounded-md bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90",children:"+ Cr\xe9er un produit"}),(0,s.jsxs)("label",{className:"cursor-pointer rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[g?"Upload...":"Importer CSV/Excel",s.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:N,className:"hidden",disabled:g})]})]})]}),(0,s.jsxs)("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-4",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total produits"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.total})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En attente"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:k.pending})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Approuv\xe9s"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.approved})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Rejet\xe9s"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:k.rejected})]})]}),y&&(0,s.jsxs)("div",{className:"mb-4 rounded-md bg-green-50 p-4",children:[s.jsx("div",{className:"font-semibold text-green-800 mb-2",children:y.message}),(0,s.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[(0,s.jsxs)("p",{children:["✓ Produits cr\xe9\xe9s: ",y.success]}),(0,s.jsxs)("p",{children:["✓ Approuv\xe9s: ",y.approved]}),(0,s.jsxs)("p",{children:["⏳ En attente: ",y.pending]}),y.errors.length>0&&(0,s.jsxs)("p",{className:"text-red-600",children:["✗ Erreurs: ",y.errors.length]})]})]}),p&&s.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4 text-red-800",children:p}),(0,s.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>h("all"),className:`rounded-md px-4 py-2 text-sm font-medium ${"all"===m?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:["Tous (",k.total,")"]}),(0,s.jsxs)("button",{onClick:()=>h("pending"),className:`rounded-md px-4 py-2 text-sm font-medium ${"pending"===m?"bg-yellow-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:["En attente (",k.pending,")"]}),(0,s.jsxs)("button",{onClick:()=>h("approved"),className:`rounded-md px-4 py-2 text-sm font-medium ${"approved"===m?"bg-green-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:["Approuv\xe9s (",k.approved,")"]}),(0,s.jsxs)("button",{onClick:()=>h("rejected"),className:`rounded-md px-4 py-2 text-sm font-medium ${"rejected"===m?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:["Rejet\xe9s (",k.rejected,")"]})]}),0===l.length?(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:[s.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Aucun produit trouv\xe9"}),s.jsx(n.default,{href:"/products/create",className:"inline-block rounded-md bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90",children:"Cr\xe9er votre premier produit"})]}):(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[e.image&&!b[e.id]?s.jsx("img",{src:e.image,alt:e.name,className:"h-12 w-12 rounded object-cover mr-4",onError:()=>v(t=>({...t,[e.id]:!0}))}):s.jsx("div",{className:"h-12 w-12 rounded bg-gray-200 mr-4 flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-gray-400",children:"N/A"})}),(0,s.jsxs)("div",{children:[s.jsx(n.default,{href:`/product/${e.slug}`,className:"text-sm font-medium text-gray-900 hover:text-primary",children:e.name}),e.brand&&s.jsx("p",{className:"text-sm text-gray-500",children:e.brand})]})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${_(e.approval_status||"pending")}`,children:P(e.approval_status||"pending")}),"rejected"===e.approval_status&&e.rejection_reason&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:e.rejection_reason})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString("fr-FR"):"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsx(n.default,{href:`/products/${e.slug}/edit`,className:"text-primary hover:text-primary/80",children:"Modifier"})})]},e.id))})]})}),c&&c.total_pages>1&&(0,s.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",c.current_page," sur ",c.total_pages]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[c.previous_page&&s.jsx("button",{onClick:()=>w(c.previous_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Pr\xe9c\xe9dent"}),c.next_page&&s.jsx("button",{onClick:()=>w(c.next_page),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Suivant"})]})]})]})]})})}function c(){return s.jsx(l.Z,{requireAuth:!0,requireClient:!0,children:s.jsx(o,{})})}},9806:(e,t,r)=>{"use strict";r.d(t,{BB:()=>l,Dg:()=>c,EE:()=>u,ch:()=>i,ex:()=>o,g4:()=>n,h7:()=>d,kR:()=>p,t$:()=>x});var s=r(1980);function a(e){return e?{Authorization:`Token ${e}`}:{}}async function n(e,t){let r=new FormData;return r.append("file",e),(await s.Z.post("/products/upload_csv/",r,{headers:{...a(t),"Content-Type":"multipart/form-data"}})).data}async function i(e,t=1,r){let n={page:t.toString()};return r&&(n.approval_status=r),(await s.Z.get("/products/my_products/",{headers:a(e),params:n})).data}async function l(e,t=1){return(await s.Z.get("/products/pending/",{headers:a(e),params:{page:t}})).data}async function d(e,t){return(await s.Z.post(`/products/${e}/approve/`,{action:"approve"},{headers:a(t)})).data}async function o(e,t,r){return(await s.Z.post(`/products/${e}/approve/`,{action:"reject",rejection_reason:t},{headers:a(r)})).data}async function c(e,t=1,r,n){let i={page:t.toString()};return r&&(i.approval_status=r),n&&(i.search=n),(await s.Z.get("/products/",{headers:a(e),params:i})).data}async function u(e,t=1){return(await s.Z.get("/offers/pending/",{headers:{Authorization:`Token ${e}`},params:{page:t}})).data}async function p(e,t){return(await s.Z.post(`/offers/${e}/approve/`,{},{headers:{Authorization:`Token ${t}`}})).data}async function x(e,t,r){return(await s.Z.post(`/offers/${e}/reject/`,{rejection_reason:t},{headers:{Authorization:`Token ${r}`}})).data}},933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=r(4129);function a(e){let{reason:t,children:r}=e;throw new s.BailoutToCSRError(t)}},6618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let s=r(326),a=r(5403);function n(e){let{moduleIds:t}=e,r=(0,a.getExpectedRequestStore)("next/dynamic css"),n=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,s.jsx)(s.Fragment,{children:n.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},9521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510);let a=(0,r(8318).default)(()=>r.e(1301).then(r.bind(r,1301)),{loadableGenerated:{modules:["app/dashboard/page.tsx -> ../../components/screens/ClientDashboardScreen"]},ssr:!1});function n(){return s.jsx(a,{})}},8318:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(4567),a=r.n(s)},4567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let s=r(3370);r(9510),r(1159);let a=s._(r(6155));function n(e,t){var r;let s={loading:e=>{let{error:t,isLoading:r,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let n={...s,...t};return(0,a.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3689:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("/Users/khairallahmohammed/Documents/primini/frontend/node_modules/next/dist/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.js")},6155:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let s=r(9510),a=r(1159),n=r(3689),i=r(4459);function l(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},o=function(e){let t={...d,...e},r=(0,a.lazy)(()=>t.loader().then(l)),o=t.loading;function c(e){let l=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,d=t.ssr?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.PreloadCss,{moduleIds:t.modules}),(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(a.Suspense,{fallback:l,children:d})}return c.displayName="LoadableComponent",c}},4459:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("/Users/khairallahmohammed/Documents/primini/frontend/node_modules/next/dist/shared/lib/lazy-dynamic/preload-css.js")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9797,7325],()=>r(5711));module.exports=s})();